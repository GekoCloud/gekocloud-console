(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{2491:function(e,t,a){"use strict";var n=a(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(564),l=n(a(3246)),o=function(){return(0,r.renderRoutes)(l.default)};t.default=o},2631:function(e,t,a){"use strict";var n=a(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,l,o,i,s,u,d=n(a(61)),c=n(a(62)),f=n(a(44)),p=n(a(13)),m=n(a(14)),h=n(a(41)),v=(n(a(45)),n(a(58))),g=a(19),_=n(a(270)),y=(r=function(){function e(){(0,p.default)(this,e),(0,f.default)(this,"list",l,this),(0,f.default)(this,"rules",o,this),(0,f.default)(this,"users",i,this),(0,f.default)(this,"detail",s,this),(0,f.default)(this,"isLoading",u,this)}var t,a,n,r;return(0,m.default)(e,[{key:"fetchList",value:(r=(0,c.default)(d.default.mark((function e(){var t,a,n,r=arguments;return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},a=t.workspace,this.list.isLoading=!0,e.next=4,request.get("kapis/iam.kubesphere.io/v1alpha2/workspaces/".concat(a,"/roles"));case 4:n=e.sent,this.list={data:Object.values(n||[]).map(_.default.roles),total:n.length||0,page:1,selectedRowKeys:[],isLoading:!1};case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"fetchDetail",value:(n=(0,c.default)(d.default.mark((function e(){var t,a,n,r,l=arguments;return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:{},a=t.workspace,n=t.role,this.isLoading=!0,!(0,v.default)(a)&&!(0,v.default)(n)){e.next=5;break}return this.isLoading=!1,e.abrupt("return");case 5:return e.next=7,request.get("kapis/iam.kubesphere.io/v1alpha2/workspaces/".concat(a,"/roles/").concat(n));case 7:(r=e.sent)&&(this.detail=_.default.roles(r)),this.isLoading=!1;case 10:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"fetchRules",value:(a=(0,c.default)(d.default.mark((function e(t){var a,n,r;return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.workspace,n=t.role,this.rules.isLoading=!0,e.next=4,request.get("kapis/iam.kubesphere.io/v1alpha2/workspaces/".concat(a,"/roles/").concat(n,"/rules"));case 4:r=e.sent,this.rules.data=r,this.rules.total=r.length,this.rules.isLoading=!1;case 8:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"fetchUsers",value:(t=(0,c.default)(d.default.mark((function e(t){var a,n,r;return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.workspace,n=t.role,this.users.isLoading=!0,e.next=4,request.get("kapis/iam.kubesphere.io/v1alpha2/workspaces/".concat(a,"/members?conditions=role=").concat(n));case 4:r=e.sent,this.users.data=r.items,this.users.total=r.total_count,this.users.isLoading=!1;case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setSelectRowKeys",value:function(e){this.list.selectedRowKeys.replace(e)}}]),e}(),l=(0,h.default)(r.prototype,"list",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],total:0,page:1,selectedRowKeys:[],isLoading:!0}}}),o=(0,h.default)(r.prototype,"rules",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],total:0,page:1,isLoading:!0}}}),i=(0,h.default)(r.prototype,"users",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],page:1,limit:10,total:0,isLoading:!0}}}),s=(0,h.default)(r.prototype,"detail",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),u=(0,h.default)(r.prototype,"isLoading",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,h.default)(r.prototype,"fetchList",[g.action],Object.getOwnPropertyDescriptor(r.prototype,"fetchList"),r.prototype),(0,h.default)(r.prototype,"fetchDetail",[g.action],Object.getOwnPropertyDescriptor(r.prototype,"fetchDetail"),r.prototype),(0,h.default)(r.prototype,"fetchRules",[g.action],Object.getOwnPropertyDescriptor(r.prototype,"fetchRules"),r.prototype),(0,h.default)(r.prototype,"fetchUsers",[g.action],Object.getOwnPropertyDescriptor(r.prototype,"fetchUsers"),r.prototype),(0,h.default)(r.prototype,"setSelectRowKeys",[g.action],Object.getOwnPropertyDescriptor(r.prototype,"setSelectRowKeys"),r.prototype),r);t.default=y},2771:function(e,t,a){e.exports={body:"AppRepoCreate__body--1dBSa",formItem:"AppRepoCreate__formItem--iH3qO",urlInput:"AppRepoCreate__urlInput--2B1Od",label:"AppRepoCreate__label--2qOEi",desc:"AppRepoCreate__desc--L_Nsn",field:"AppRepoCreate__field--7hAGF",fieldInput:"AppRepoCreate__fieldInput--2aknE",protocol:"AppRepoCreate__protocol--2tM1l",url:"AppRepoCreate__url--3tjuo",validated:"AppRepoCreate__validated--1laKR",validStatus:"AppRepoCreate__validStatus--d9NK4",access:"AppRepoCreate__access--3qhTv",accessItem:"AppRepoCreate__accessItem--22lD7",verifyBtn:"AppRepoCreate__verifyBtn--yAN3v"}},3246:function(e,t,a){"use strict";var n=a(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(97)),l=a(564),o=n(a(3247)),i=n(a(3251)),s=n(a(3254)),u=n(a(3255)),d=n(a(3258)),c=n(a(3263)),f=n(a(3266)),p=n(a(3282)),m=n(a(3286)),h=n(a(3296)),v=n(a(3300)),g=n(a(3308)),_="/workspaces/:workspace",y=[].concat((0,r.default)(h.default),(0,r.default)(v.default),(0,r.default)(g.default),[{path:_,component:o.default,routes:[].concat((0,r.default)(m.default),[{path:"".concat(_,"/projects"),component:d.default,exact:!0},{path:"".concat(_,"/devops"),component:c.default,ksModule:"devops",exact:!0},{path:"".concat(_,"/apps"),component:f.default,ksModule:"openpitrix",exact:!0},{path:"".concat(_,"/base-info"),component:i.default,exact:!0},{path:"".concat(_,"/repos"),component:p.default,ksModule:"openpitrix",exact:!0},{path:"".concat(_,"/roles"),component:s.default,exact:!0},{path:"".concat(_,"/members"),component:u.default,exact:!0},(0,l.getIndexRoute)({path:_,to:"".concat(_,"/overview"),exact:!0}),(0,l.getIndexRoute)({path:"*",to:"/404",exact:!0})])}]);t.default=y},3247:function(e,t,a){"use strict";var n=a(4),r=a(81);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,o=n(a(61)),i=n(a(62)),s=n(a(13)),u=n(a(14)),d=n(a(17)),c=n(a(16)),f=n(a(18)),p=n(a(22)),m=r(a(0)),h=a(60),v=n(a(129)),g=a(564),_=a(955),y=n(a(3248)),k=n(a(2533)),b=n(a(3250)),E=(0,h.inject)("rootStore")(l=(0,h.observer)(l=function(e){function t(e){var a;if((0,s.default)(this,t),(a=(0,d.default)(this,(0,c.default)(t).call(this,e))).enterWorkspace=function(){var e=(0,i.default)(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.props.rootStore.workspace,!globals.app.isClusterAdmin){e.next=3;break}return e.abrupt("return",a.routing.push("/workspaces/".concat(t,"/overview")));case 3:if((0,p.default)(globals.user,"workspace_rules[".concat(t,"]"))){e.next=7;break}return e.next=7,n.fetchRules({workspace:t});case 7:if(!globals.app.hasPermission({module:"workspaces",action:"manage"})&&!globals.app.hasPermission({module:"workspaces",action:"view",workspace:t})){e.next=9;break}return e.abrupt("return",a.routing.push("/workspaces/".concat(t,"/overview")));case 9:return e.abrupt("return",a.routing.push("/dashboard"));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!a.props.rootStore.workspace){var n=new k.default;e.rootStore.register("workspace",n)}return a.init(e.match.params),a}var a;return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.match.params.workspace!==this.workspace&&this.init(e.match.params)}},{key:"init",value:(a=(0,i.default)(o.default.mark((function e(t){var a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=this.props.rootStore.workspace).initializing=!0,e.next=4,a.fetchDetail(t);case 4:if(void 0!==(0,p.default)(globals.user,"workspace_rules[".concat(t.workspace,"]"))){e.next=8;break}return e.next=8,a.fetchRules(t);case 8:if(globals.app.hasPermission({module:"workspaces",action:"manage"})||globals.app.hasPermission({module:"workspaces",action:"view",workspace:t.workspace})){e.next=11;break}return this.routing.push("/404"),e.abrupt("return");case 11:a.initializing=!1;case 12:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"getWorkspaces",value:function(){return this.props.rootStore.workspace.list.data.map((function(e){return{label:e.name,value:e.name}}))}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.route,n=e.location,r=this.props.rootStore.workspace,l=r.detail;return r.initializing?m.default.createElement(v.default,{className:b.default.loading}):m.default.createElement("div",null,m.default.createElement("div",{className:"ks-page-side"},m.default.createElement(y.default,{icon:l.logo,value:this.workspace,onChange:this.enterWorkspace,multi:globals.user.workspaces.length>1}),m.default.createElement(_.Nav,{className:"ks-page-nav",navs:globals.app.getWorkspaceNavs(this.workspace),location:n,match:t})),m.default.createElement("div",{className:"ks-page-main"},(0,g.renderRoutes)(a.routes)))}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),t}(m.Component))||l)||l;t.default=E},3248:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=r(n(13)),o=r(n(14)),i=r(n(17)),s=r(n(16)),u=r(n(18)),d=r(n(0)),c=r(n(1)),f=r(n(3)),p=r(n(38)),m=r(n(2616)),h=r(n(2703)),v=r(n(2533)),g=r(n(940)),_=r(n(3249)),y=function(e){function a(e){var t;return(0,l.default)(this,a),(t=(0,i.default)(this,(0,s.default)(a).call(this,e))).showSelect=function(){t.setState({showSelect:!0})},t.hideSelect=function(){t.setState({showSelect:!1})},t.handleSelect=function(e){var a=t.props.onChange;t.hideSelect(),a(e)},t.showCreate=function(){t.setState({showCreate:!0,showSelect:!1})},t.hideCreate=function(){t.setState({showCreate:!1})},t.handleCreate=function(e){t.store.create(e).then((function(){t.hideCreate(),location.href="/workspaces/".concat(e.metadata.name)}))},t.state={showSelect:!1,showCreate:!1},t.store=new v.default,t}return(0,u.default)(a,e),(0,o.default)(a,[{key:"render",value:function(){var e=this.props,a=e.icon,n=e.defaultIcon,r=e.value,l=e.multi,o=this.state,i=o.showSelect,s=o.showCreate,u=globals.app.getActions({module:"workspaces"}).includes("manage");return d.default.createElement("div",null,d.default.createElement("div",{className:(0,f.default)(_.default.titleWrapper,{pointer:l}),onClick:this.showSelect},d.default.createElement("div",{className:_.default.icon},d.default.createElement("img",{src:a||n,alt:""})),d.default.createElement("div",{className:_.default.text},d.default.createElement("p",null,t("Workspace")),d.default.createElement("div",{className:"h6","data-tooltip":r},r)),l&&d.default.createElement("div",{className:_.default.arrow},d.default.createElement(p.default,{name:"caret-down",type:"light"}))),d.default.createElement(h.default,{visible:i,onChange:this.handleSelect,onCancel:this.hideSelect,onShowCreate:u?this.showCreate:null}),u&&d.default.createElement(m.default,{store:this.store,formTemplate:this.formTemplate,visible:s,onOk:this.handleCreate,onCancel:this.hideCreate,isSubmitting:this.store.isSubmitting}))}},{key:"formTemplate",get:function(){return g.default.workspaces()}}]),a}(d.default.Component);a.default=y,y.propTypes={icon:c.default.string,defaultIcon:c.default.string,value:c.default.string,onChange:c.default.func},y.defaultProps={icon:"",defaultIcon:"/assets/default-workspace.svg",value:"",onChange:function(){}}},3249:function(e,t,a){e.exports={titleWrapper:"Selector__titleWrapper--1pcud",icon:"Selector__icon--QSnic",text:"Selector__text--3_sdP",arrow:"Selector__arrow--p-iCR",dropdown:"Selector__dropdown--2qSiI",bottom:"Selector__bottom--3mx0a"}},3250:function(e,t,a){e.exports={wrapper:"containers__wrapper--3IFP4",main:"containers__main--1Paej",navWrapper:"containers__navWrapper--2o9ib",nav:"containers__nav--3m96R",cards:"containers__cards--3hJs0",title:"containers__title--2OLjB",create:"containers__create--1OfdO",total:"containers__total--1-x4R",noData:"containers__noData--2pSD7",loading:"containers__loading--K2npJ"}},3251:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=r(n(13)),i=r(n(14)),s=r(n(17)),u=r(n(16)),d=r(n(18)),c=r(n(0)),f=r(n(22)),p=r(n(58)),m=n(19),h=n(60),v=r(n(38)),g=r(n(190)),_=r(n(271)),y=r(n(2516)),k=r(n(224)),b=r(n(2524)),E=r(n(3252)),w=r(n(2594)),S=r(n(2523)),C=r(n(2631)),M=r(n(3253)),P=(0,h.inject)("rootStore")(l=(0,h.observer)(l=function(e){function a(e){var t;return(0,o.default)(this,a),(t=(0,s.default)(this,(0,u.default)(a).call(this,e))).canViewModule=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"view";return globals.app.hasPermission({module:e,action:a,workspace:t.workspace})},t.hideEdit=function(){t.setState({showEdit:!1})},t.handleEdit=function(e){var a=(0,f.default)(e,"metadata.name");t.store.update(e).then((function(){t.hideEdit(),t.store.fetchDetail({workspace:a})}))},t.hideDelete=function(){t.setState({showDelete:!1})},t.handleDelete=function(){t.store.delete(t.props.match.params).then((function(){t.routing.push("/")}))},t.handleMoreMenuClick=function(e,a){switch(a){case"edit":t.setState({showEdit:!0});break;case"delete":t.setState({showDelete:!0})}},t.state={showEdit:!1,showDelete:!1},t.roleStore=new C.default,t.roleStore.fetchList(t.props.match.params),t}return(0,d.default)(a,e),(0,i.default)(a,[{key:"renderMoreMenu",value:function(){return c.default.createElement(_.default,{onClick:this.handleMoreMenuClick},this.enabledItemActions.map((function(e){return c.default.createElement(_.default.MenuItem,{key:e.key},c.default.createElement(v.default,{name:e.icon})," ",e.text)})))}},{key:"renderOperations",value:function(){return(0,p.default)(this.enabledItemActions)?null:c.default.createElement(g.default,{content:this.renderMoreMenu(),trigger:"click",placement:"bottomRight"},c.default.createElement(k.default,{icon:"more",type:"flat"}))}},{key:"renderBaseInfo",value:function(){var e=(0,m.toJS)(this.props.rootStore.workspace).detail,a=(0,m.toJS)(this.roleStore.list).total;return c.default.createElement("div",{className:"margin-t12"},c.default.createElement(y.default,{title:t("Basic Info"),operations:this.renderOperations()},c.default.createElement("div",{className:M.default.baseInfo},c.default.createElement(w.default,{className:M.default.info,image:"/assets/default-workspace.svg",title:e.name,desc:t((0,f.default)(e,"description")||"Workspace")}),c.default.createElement(w.default,{icon:"group",className:M.default.info,title:(0,f.default)(e,'annotations["kubesphere.io/member-count"]',0),desc:t("Workspace Members")}),c.default.createElement(w.default,{icon:"role",title:a,className:M.default.info,desc:t("Workspace Roles")}))))}},{key:"render",value:function(){var e=this.props.rootStore.workspace,a=e.detail,n=e.isSubmitting;return c.default.createElement("div",null,c.default.createElement(S.default,{title:t("Basic Info"),icon:"cdn",description:t("WORKSPACE_CREATE_DESC"),className:M.default.header,module:this.module}),this.renderBaseInfo(),c.default.createElement(E.default,{detail:a._originData,visible:this.state.showEdit,onOk:this.handleEdit,onCancel:this.hideEdit,isSubmitting:n}),c.default.createElement(b.default,{type:t("Workspace"),resource:a.name,desc:t.html("DELETE_WORKSPACE_TIP",{resource:a.name}),visible:this.state.showDelete,isSubmitting:n,onOk:this.handleDelete,onCancel:this.hideDelete}))}},{key:"store",get:function(){return this.props.rootStore.workspace}},{key:"module",get:function(){return"BaseInfo"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"workspaces",workspace:this.workspace})}},{key:"itemActions",get:function(){return[{key:"edit",icon:"pen",action:"edit",text:t("Edit Info")},{key:"delete",icon:"trash",action:"delete",text:t("Delete Workspace")}]}},{key:"enabledItemActions",get:function(){var e=this;return this.itemActions.filter((function(t){return!t.action||e.enabledActions.includes(t.action)}))}}]),a}(c.default.Component))||l)||l;a.default=P},3252:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,i,s=r(n(13)),u=r(n(14)),d=r(n(17)),c=r(n(16)),f=r(n(18)),p=r(n(0)),m=r(n(1)),h=n(60),v=r(n(386)),g=r(n(2453)),_=r(n(387)),y=r(n(267)),k=(0,h.observer)((i=o=function(e){function a(){var e,t;(0,s.default)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=(0,d.default)(this,(e=(0,c.default)(a)).call.apply(e,[this].concat(r)))).handleOk=function(e){(0,t.props.onOk)(e)},t}return(0,f.default)(a,e),(0,u.default)(a,[{key:"render",value:function(){var e=this.props,a=e.detail,n=e.visible,r=e.onCancel,l=e.isSubmitting;return p.default.createElement(_.default.Form,{width:691,title:t("Edit Info"),icon:"pen",data:a,onOk:this.handleOk,onCancel:r,visible:n,isSubmitting:l},p.default.createElement(y.default.Item,{label:t("Workspace Name"),desc:t("WORKSPACE_NAME_DESC")},p.default.createElement(v.default,{name:"metadata.name",disabled:!0})),p.default.createElement(y.default.Item,{label:t("Description"),desc:t("SHORT_DESCRIPTION_DESC")},p.default.createElement(g.default,{name:"metadata.annotations['kubesphere.io/description']"})))}}]),a}(p.default.Component),o.propTypes={detail:m.default.object,visible:m.default.bool,onOk:m.default.func,onCancel:m.default.func,isSubmitting:m.default.bool},o.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},l=i))||l;a.default=k},3253:function(e,t,a){e.exports={baseInfo:"BaseInfo__baseInfo--h7x1D",info:"BaseInfo__info--2bAx7"}},3254:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=r(n(37)),i=r(n(13)),s=r(n(14)),u=r(n(17)),d=r(n(16)),c=r(n(18)),f=r(n(22)),p=r(n(0)),m=n(60),h=n(49),v=n(114),g=r(n(2519)),_=r(n(2523)),y=r(n(2518)),k=r(n(2631)),b=(0,m.inject)("rootStore")(l=(0,m.observer)(l=function(e){function a(){var e,n;(0,i.default)(this,a);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(n=(0,u.default)(this,(e=(0,d.default)(a)).call.apply(e,[this].concat(l)))).getColumns=function(){return[{title:t("Name"),key:"name",dataIndex:"name",width:"30%",render:function(e){return p.default.createElement(g.default,{title:e,icon:v.ICON_TYPES[n.module],to:"".concat(n.prefix,"/").concat(e)})}},{title:t("Description"),key:"description",dataIndex:"description",isHideable:!0,width:"40%",render:function(e,a){var n=(0,f.default)(a,"name");return e&&globals.config.presetWorkspaceRoles.includes(n)?t(e):e}},{title:t("Created Time"),dataIndex:"createTime",isHideable:!0,width:"30%",render:function(e){return(0,h.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},n}return(0,c.default)(a,e),(0,s.default)(a,[{key:"init",value:function(){this.store=new k.default}},{key:"getData",value:function(e){this.store.fetchList((0,o.default)({},this.props.match.params,e))}},{key:"getTableProps",value:function(){return{onFetch:this.handleFetch,hideSearch:!0}}},{key:"renderHeader",value:function(){return p.default.createElement(_.default,{title:t("Workspace Roles"),icon:"role",description:t("WORKSPACE_ROLE_DESC"),module:this.module})}},{key:"module",get:function(){return"roles"}},{key:"name",get:function(){return"Workspace Role"}}]),a}(y.default))||l)||l;a.default=b},3255:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=r(n(70)),i=r(n(37)),s=r(n(13)),u=r(n(14)),d=r(n(17)),c=r(n(16)),f=r(n(18)),p=r(n(58)),m=r(n(50)),h=r(n(0)),v=n(19),g=n(60),_=n(49),y=r(n(2519)),k=r(n(2584)),b=r(n(2542)),E=r(n(2524)),w=r(n(2659)),S=r(n(2660)),C=r(n(2523)),M=r(n(2518)),P=r(n(2593)),D=r(n(2631)),O=(0,g.inject)("rootStore")(l=(0,g.observer)(l=function(e){function a(){var e,n;(0,s.default)(this,a);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(n=(0,d.default)(this,(e=(0,c.default)(a)).call.apply(e,[this].concat(l)))).handlePaging=function(e){return n.list.paging(e)},n.getColumns=function(){return[{title:t("Member Name"),dataIndex:"username",search:!0,width:"40%",render:function(e,t){return h.default.createElement(y.default,{to:"".concat(n.prefix,"/").concat(e),avatar:t.avatar_url||"/assets/default-user.svg",title:e,desc:t.email})}},{title:t("Status"),dataIndex:"status",isHideable:!0,width:"19%",render:function(e){return h.default.createElement(k.default,{status:e})}},{title:t("Role"),dataIndex:"workspace_role",isHideable:!0,width:"19%"},{title:t("Last Login Time"),dataIndex:"last_login_time",isHideable:!0,width:"19%",render:function(e){return h.default.createElement("p",null,e?(0,_.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):t("Not logged in yet"))}},{key:"more",render:function(e,t){return t.username===globals.user.username?null:n.renderMore(e,t)}}]},n.handleInvite=function(e,t){return n.store.addMember(n.props.match.params,[{username:e,workspace_role:t}]).then((function(){n.routing.query()}))},n.handleModify=function(e,t){var a=[];(0,m.default)(e)?e.forEach((function(e){a.push({username:e.username,workspace_role:t})})):a.push({username:e.username,workspace_role:t}),n.store.changeMemberRole(n.props.match.params,a).then((function(){(0,m.default)(e)&&n.store.setSelectRowKeys([]),n.hideModal("modifyModal")(),n.routing.query()}))},n.handleDelete=function(){var e=n.state.selectItem;n.store.deleteMember(n.props.match.params,[e.username]).then((function(){n.hideModal("deleteModal")(),n.routing.query()}))},n.handleBatchDelete=function(){var e=n.store.list.selectedRowKeys;e.length>0&&n.store.deleteMember(n.props.match.params,e).then((function(){n.hideModal("batchDeleteModal")(),n.store.setSelectRowKeys([]),n.routing.query()}))},n}return(0,f.default)(a,e),(0,u.default)(a,[{key:"init",value:function(){this.store=new P.default,this.roleStore=new D.default,this.roleStore.fetchList(this.props.match.params)}},{key:"getData",value:function(e){this.store.fetchList((0,i.default)({},this.props.match.params,e))}},{key:"getTableProps",value:function(){return{hideSearch:!0,onFetch:this.handleFetch,onPaging:this.handlePaging,onSelectRowKeys:this.handleSelectRowKeys,onDelete:this.showModal("batchDeleteModal"),actions:[{key:"invite",type:"control",text:t("Invite Member"),action:"create",onClick:this.showModal("inviteModal")}],selectActions:[{key:"delete",type:"danger",text:t("Remove Members"),action:"delete",onClick:this.showModal("batchDeleteModal")}],getCheckboxProps:function(e){return{disabled:e.username===globals.user.username,name:e.username}}}}},{key:"getEmptyProps",value:function(){return{createText:t("Invite Member")}}},{key:"renderEmpty",value:function(){var e=this.enabledActions.includes("create")?this.showModal("inviteModal"):null;return h.default.createElement(b.default,(0,o.default)({name:this.name,onCreate:e},this.getEmptyProps()))}},{key:"renderModals",value:function(){var e=this.state,a=e.modifyModal,n=e.inviteModal,r=e.deleteModal,l=e.batchDeleteModal,o=e.selectItem,i=void 0===o?{}:o,s=(0,v.toJS)(this.store.list),u=s.selectedRowKeys,d=s.originData,c=(0,v.toJS)(this.roleStore.list.data),f=(0,p.default)(i)?u.map((function(e){return d.find((function(t){return t.username===e}))})):[i],m=this.list.selectedRowKeys.join(", ");return h.default.createElement("div",null,h.default.createElement(E.default,{title:t("Sure to remove"),desc:t.html("REMOVE_MEMBER_TIP",{resource:i[this.rowKey]}),resource:i[this.rowKey],visible:r,onOk:this.handleDelete,onCancel:this.hideModal("deleteModal"),isSubmitting:this.store.isSubmitting}),this.list.selectedRowKeys&&h.default.createElement(E.default,{visible:l,title:t("Sure to remove"),desc:t.html("REMOVE_MEMBER_TIP",{resource:m}),resource:m,onOk:this.handleBatchDelete,onCancel:this.hideModal("batchDeleteModal"),isSubmitting:this.store.isSubmitting}),this.enabledActions.includes("edit")&&h.default.createElement(w.default,{roles:c,users:f,visible:a,onOk:this.handleModify,onCancel:this.hideModal("modifyModal"),isSubmitting:this.store.isSubmitting}),this.enabledActions.includes("create")&&h.default.createElement(S.default,{visible:n,roles:c,users:d,title:t("Invite members to the workspace"),desc:t("INVITE_WORKSPACE_MEMBER_DESC"),searchPlaceholder:t("INVITE_WORKSPACE_MEMBER_SEARCH_PLACEHODLER"),onOk:this.handleInvite,onCancel:this.hideModal("inviteModal")}))}},{key:"renderHeader",value:function(){return h.default.createElement("div",{className:"margin-b12"},h.default.createElement(C.default,{title:t("Workspace Members"),icon:"group",description:t("WORKSPACE_MEMBER_DESC"),module:this.module}))}},{key:"module",get:function(){return"users"}},{key:"authKey",get:function(){return"members"}},{key:"name",get:function(){return"Member"}},{key:"rowKey",get:function(){return"username"}},{key:"itemActions",get:function(){return[{key:"modify",icon:"pen",text:t("Modify Member Role"),action:"edit",onClick:this.showModal("modifyModal")},{key:"delete",icon:"trash",text:t("Remove Member"),action:"delete",onClick:this.showModal("deleteModal")}]}}]),a}(M.default))||l)||l;a.default=O},3258:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=r(n(61)),i=r(n(63)),s=r(n(62)),u=r(n(37)),d=r(n(13)),c=r(n(14)),f=r(n(17)),p=r(n(16)),m=r(n(18)),h=r(n(58)),v=r(n(130)),g=r(n(22)),_=r(n(2465)),y=r(n(2458)),k=r(n(0)),b=n(565),E=n(19),w=n(60),S=r(n(2519)),C=r(n(388)),M=r(n(2521)),P=r(n(2523)),D=r(n(2518)),O=r(n(2621)),A=r(n(2524)),R=r(n(2644)),T=r(n(2767)),I=n(49),x=n(939),N=r(n(940)),j=r(n(2543)),L=r(n(2604)),U=r(n(3262)),V=(0,w.inject)("rootStore")(l=(0,w.observer)(l=function(e){function a(){var e,n;(0,d.default)(this,a);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(n=(0,f.default)(this,(e=(0,p.default)(a)).call.apply(e,[this].concat(l)))).getColumns=function(){return[{title:t("Name"),dataIndex:"name",sorter:!0,sortOrder:n.getSortOrder("name"),width:"20%",render:function(e,t){return k.default.createElement(S.default,{to:"Terminating"===t.status?null:"/projects/".concat(e),icon:"project",iconSize:40,desc:t.description||"-",title:(0,I.getDisplayName)(t)})}},{title:t("Pod Count"),dataIndex:"annotations.namespace_pod_count",isHideable:!0,width:"10%",render:function(e){return(0,v.default)(e)?0:e}},{title:t("CPU Usage"),dataIndex:"annotations.namespace_cpu_usage",isHideable:!0,width:"13%",render:function(e){return(0,x.getSuitableValue)(e,"cpu","-")}},{title:t("Memory Usage"),dataIndex:"annotations.namespace_memory_usage_wo_cache",isHideable:!0,width:"13%",render:function(e){return(0,x.getSuitableValue)(e,"memory","-")}},{title:t("Creator"),dataIndex:"creator",isHideable:!0,width:"14%",render:function(e){return e||"-"}},{title:t("Created Time"),dataIndex:"createTime",sorter:!0,sortOrder:n.getSortOrder("createTime"),isHideable:!0,width:"16%",render:function(e){return(0,I.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}},{key:"more",render:function(e,a){return"Terminating"===a.status?k.default.createElement(M.default,{type:"terminating",name:t("Terminating"),flicker:!0}):n.renderMore(e,a)}}]},n.handleSelectRowKeys=function(e){n.store.setSelectRowKeys("list",e)},n.handleEditQuota=function(e){var t=n.state.selectItem,a={name:e.name,namespace:t.name},r=(0,g.default)(e,"spec.hard",e.hard);n.quotaStore.checkName(a).then((function(l){l.exist?n.quotaStore.update(a,(0,u.default)({},e,{spec:{hard:(0,_.default)(r,h.default)}})).then(n.postEditQuota):n.quotaStore.create({apiVersion:"v1",kind:"ResourceQuota",metadata:(0,u.default)({},a,{name:t.name}),spec:{hard:r}}).then(n.postEditQuota)}))},n.postEditQuota=function(){n.hideModal("editQuotaModal")(),C.default.success({content:"".concat(t("Updated Successfully"),"!")})},n}var n;return(0,m.default)(a,e),(0,c.default)(a,[{key:"init",value:function(){this.store=new j.default,this.quotaStore=new L.default,this.initWebsocket()}},{key:"initWebsocket",value:function(){var e=this,t=this.props.match.params.workspace;if("getWatchListUrl"in this.store){var a=this.store.getWatchListUrl({workspace:t});this.websocket.watch(a),this.getData=(0,y.default)(this.getData,1e3),this.disposer=(0,E.reaction)((function(){return e.websocket.message}),(function(t){if("DELETED"===t.type){var a=(0,b.parse)(location.search.slice(1));e.getData((0,u.default)({},a,{silent:!0}))}}))}}},{key:"getData",value:(n=(0,s.default)(o.default.mark((function e(t){var a,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.silent,n=(0,i.default)(t,["silent"]),a&&(this.list.silent=!0),e.next=4,this.store.fetchList((0,u.default)({},this.props.match.params,n,{metrics:!0}));case 4:this.list.silent=!1;case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getTableProps",value:function(){return(0,u.default)({},D.default.prototype.getTableProps.call(this),{searchType:"keyword",getCheckboxProps:function(e){return{disabled:"Terminating"===e.status,name:e.name}}})}},{key:"renderHeader",value:function(){return k.default.createElement(P.default,{className:U.default.header,icon:"project",title:t("Projects"),description:t("PROJECTS_DESC"),module:this.module,tips:this.tips})}},{key:"renderModals",value:function(){var e={projects:this.formTemplate},a=this.store.isSubmitting,n=this.state,r=n.createModal,l=n.editModal,o=n.editQuotaModal,i=n.deleteModal,s=n.batchDeleteModal,u=n.selectItem,d=void 0===u?{}:u;return k.default.createElement("div",null,k.default.createElement(A.default,{type:t(this.name),resource:d[this.rowKey],desc:t.html("DELETE_PROJECT_TIP",{resource:d[this.rowKey]}),visible:i,onOk:this.handleDelete,onCancel:this.hideModal("deleteModal"),isSubmitting:a}),this.list.selectedRowKeys&&k.default.createElement(A.default,{type:t(this.name),resource:this.list.selectedRowKeys.join(", "),visible:s,desc:t.html("DELETE_PROJECT_TIP",{resource:this.list.selectedRowKeys.join(", ")}),onOk:this.handleBatchDelete,onCancel:this.hideModal("batchDeleteModal"),isSubmitting:a}),k.default.createElement(O.default,{type:"projects",formTemplate:e,visible:r,isSubmitting:a,onOk:this.handleCreate,onCancel:this.hideModal("createModal")}),k.default.createElement(R.default,{detail:d,visible:l,onOk:this.handleEdit,onCancel:this.hideModal("editModal"),isSubmitting:a}),k.default.createElement(T.default,{detail:d,visible:o,onOk:this.handleEditQuota,onCancel:this.hideModal("editQuotaModal"),isSubmitting:this.quotaStore.isSubmitting}))}},{key:"authKey",get:function(){return"projects"}},{key:"module",get:function(){return"projects"}},{key:"name",get:function(){return"Project"}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"formTemplate",get:function(){return N.default.project?{Project:N.default.project(),LimitRange:N.default.limitRange()}:{}}},{key:"itemActions",get:function(){var e=[{key:"edit",icon:"pen",text:t("Edit"),action:"edit",onClick:this.showModal("editModal")},{key:"delete",icon:"trash",text:t("Delete"),action:"delete",onClick:this.showModal("deleteModal")}];return globals.app.hasPermission({workspace:this.workspace,module:"workspaces",action:"edit"})&&e.splice(1,0,{key:"quotaEdit",icon:"pen",text:t("Edit Quota"),action:"edit",onClick:this.showModal("editQuotaModal")}),e}},{key:"tips",get:function(){return[{title:t("PROJECT_TYPES_Q"),description:t("PROJECT_TYPES_A")}]}}]),a}(D.default))||l)||l;a.default=V},3262:function(e,t,a){e.exports={main:"Projects__main--3fiFk",navWrapper:"Projects__navWrapper--3y8ZG",nav:"Projects__nav--3f-e7",title:"Projects__title--2zxaA",titleWrapper:"Projects__titleWrapper--2zers",icon:"Projects__icon--3PDD_",text:"Projects__text--2-dOd",loading:"Projects__loading--1n6V2"}},3263:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=r(n(37)),i=r(n(13)),s=r(n(14)),u=r(n(17)),d=r(n(16)),c=r(n(18)),f=r(n(0)),p=n(60),m=r(n(2519)),h=r(n(388)),v=r(n(2518)),g=r(n(2621)),_=r(n(2524)),y=r(n(3264)),k=n(49),b=r(n(2523)),E=r(n(2568)),w=r(n(3265)),S=(0,p.inject)("rootStore")(l=(0,p.observer)(l=function(e){function a(){var e,n;(0,i.default)(this,a);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(n=(0,u.default)(this,(e=(0,d.default)(a)).call.apply(e,[this].concat(l)))).getColumns=function(){return[{title:t("Name"),dataIndex:"name",width:"40%",render:function(e,t){return f.default.createElement(m.default,{icon:"strategy-group",iconSize:40,to:"/devops/".concat(t.project_id),desc:t.description||"-",title:e})}},{title:t("Creator"),dataIndex:"creator",isHideable:!0,width:"28%",render:function(e){return e||"-"}},{title:t("Created Time"),dataIndex:"create_time",isHideable:!0,width:"28%",render:function(e){return(0,k.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}},{key:"more",render:n.renderMore}]},n.handleSelectRowKeys=function(e){n.store.setSelectRowKeys("list",e)},n.handleEdit=function(e){var a=n.state.selectItem;n.store.update(a.project_id,e).then((function(){n.hideModal("editModal")(),h.default.success({content:"".concat(t("Updated Successfully"),"!")}),n.routing.query()}))},n}return(0,c.default)(a,e),(0,s.default)(a,[{key:"init",value:function(){this.store=new E.default}},{key:"getEmptyProps",value:function(){return{createText:t("Create DevOps Project")}}},{key:"getTableProps",value:function(){return(0,o.default)({},v.default.prototype.getTableProps.call(this),{searchType:"keyword"})}},{key:"renderHeader",value:function(){return f.default.createElement(b.default,{title:t("DevOps Projects"),icon:"strategy-group",description:t("DEVOPS_DESCRIPTION"),className:w.default.header,module:this.module,tips:this.tips})}},{key:"renderModals",value:function(){var e=this,a={devops:this.formTemplate},n=this.state,r=n.createModal,l=n.editModal,o=n.deleteModal,i=n.batchDeleteModal,s=n.selectItem,u=void 0===s?{}:s,d=this.list.data.filter((function(t){return e.list.selectedRowKeys.includes(t[e.rowKey])})).map((function(e){return e.name})).join(", ");return f.default.createElement("div",null,f.default.createElement(_.default,{type:t(this.name),resource:u.name,desc:t.html("DELETE_DEVOPS_TIP",{resource:u.name}),visible:o,onOk:this.handleDelete,onCancel:this.hideModal("deleteModal"),isSubmitting:this.store.isSubmitting}),this.list.selectedRowKeys&&f.default.createElement(_.default,{type:t(this.name),resource:d,visible:i,desc:t.html("DELETE_DEVOPS_TIP",{resource:d}),onOk:this.handleBatchDelete,onCancel:this.hideModal("batchDeleteModal"),isSubmitting:this.store.isSubmitting}),f.default.createElement(g.default,{type:"devops",formTemplate:a,visible:r,isSubmitting:this.store.isSubmitting,onOk:this.handleCreate,onCancel:this.hideModal("createModal")}),f.default.createElement(y.default,{detail:u,visible:l,isSubmitting:this.store.isSubmitting,onOk:this.handleEdit,onCancel:this.hideModal("editModal")}))}},{key:"name",get:function(){return"DevOps Project"}},{key:"module",get:function(){return"devops"}},{key:"authKey",get:function(){return"devops"}},{key:"formTemplate",get:function(){return{}}},{key:"tips",get:function(){return[{title:t("DEVOPS_TIP_GITOPS_Q"),description:t("DEVOPS_TIP_GITOPS_A")},{title:t("DEVOPS_TIP_TYPE_Q"),description:t("DEVOPS_TIP_TYPE_A")}]}},{key:"rowKey",get:function(){return"project_id"}}]),a}(v.default))||l)||l;a.default=S},3264:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,i,s=r(n(13)),u=r(n(14)),d=r(n(17)),c=r(n(16)),f=r(n(18)),p=r(n(22)),m=r(n(0)),h=r(n(1)),v=n(19),g=n(60),_=r(n(386)),y=r(n(225)),k=r(n(2453)),b=r(n(387)),E=r(n(267)),w=n(114),S=r(n(2568)),C=(0,g.observer)((i=o=function(e){function a(e){var t;return(0,s.default)(this,a),(t=(0,d.default)(this,(0,c.default)(a).call(this,e))).handleOk=function(e){(0,t.props.onOk)(e)},t.form=m.default.createRef(),t.store=new S.default,e.detail.project_id&&t.store.fetchMembers({limit:1/0,project_id:e.detail.project_id}),t}return(0,f.default)(a,e),(0,u.default)(a,[{key:"componentWillReceiveProps",value:function(e){e.detail&&e.detail.project_id&&e.detail.project_id!==(0,p.default)(this.props,"detail.project_id")&&this.store.fetchMembers({limit:1/0,project_id:e.detail.project_id})}},{key:"getMembersOptions",value:function(){return(0,v.toJS)(this.store.members).data.map((function(e){return{label:e.username,value:e.username}}))}},{key:"render",value:function(){var e=this.props,a=e.detail,n=e.visible,r=e.onCancel,l=e.isSubmitting;return m.default.createElement(b.default.Form,{width:691,title:t("Edit Info"),icon:"pen",data:a,onOk:this.handleOk,onCancel:r,isSubmitting:l,visible:n},m.default.createElement(E.default.Item,{label:t("DevOps Name"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("Please input name")},{pattern:w.PATTERN_NAME,message:t("PATTERN_NAME_INVALID_TIP")}]},m.default.createElement(_.default,{name:"name"})),m.default.createElement(E.default.Item,{label:t("Creator"),desc:t("DEVOPS_ADMIN_DESC")},m.default.createElement(y.default,{name:"creator",options:this.getMembersOptions(),disabled:!0})),m.default.createElement(E.default.Item,{label:t("Description"),desc:t("DESCRIPTION_DESC")},m.default.createElement(k.default,{name:"description"})))}}]),a}(m.default.Component),o.propTypes={detail:h.default.object,visible:h.default.bool,onOk:h.default.func,onCancel:h.default.func,isSubmitting:h.default.bool},o.defaultProps={visible:!1,isSubmitting:!1,detail:{},onOk:function(){},onCancel:function(){}},l=i))||l;a.default=C},3265:function(e,t,a){e.exports={main:"DevOps__main--1aaC-",navWrapper:"DevOps__navWrapper--2zFjj",nav:"DevOps__nav--1A9Zm",title:"DevOps__title--3Hb_a",titleWrapper:"DevOps__titleWrapper--mwlPi",icon:"DevOps__icon--AXyl1",text:"DevOps__text--1eIOA",avatar:"DevOps__avatar--2NQry",bannerIcon:"DevOps__bannerIcon--PDAsW",loading:"DevOps__loading--1dawd"}},3266:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=r(n(70)),i=r(n(37)),s=r(n(13)),u=r(n(14)),d=r(n(17)),c=r(n(16)),f=r(n(18)),p=r(n(0)),m=n(60),h=r(n(2457)),v=r(n(2521)),g=r(n(388)),_=r(n(224)),y=r(n(2523)),k=r(n(2542)),b=r(n(2518)),E=r(n(2605)),w=r(n(3268)),S=r(n(2661)),C=n(49),M=n(2553),P=r(n(2572)),D=r(n(3281)),O=(0,m.inject)("rootStore")(l=(0,m.observer)(l=function(e){function a(){var e,n;(0,s.default)(this,a);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(n=(0,d.default)(this,(e=(0,c.default)(a)).call.apply(e,[this].concat(l)))).getColumns=function(){return[{title:t("Name"),dataIndex:"app_id",width:"27%",render:function(e,t){return p.default.createElement(E.default,{isApp:!0,to:"/workspaces/".concat(n.workspace,"/apps/").concat(e),avatarType:"appIcon",avatar:t.icon,iconLetter:t.name,iconSize:40,title:(0,C.getDisplayName)(t),desc:t.description})}},{title:t("Status"),dataIndex:"status",isHideable:!0,width:"20%",render:function(e){return p.default.createElement(v.default,{type:e,name:t((0,h.default)((0,M.transferAppStatus)(e)))})}},{title:t("Latest Version"),dataIndex:"latest_app_version.name",isHideable:!0,width:"15%"},{title:t("Deployed Instances"),dataIndex:"cluster_total",isHideable:!0,width:"15%",render:function(e){return e||0}},{title:t("Updated Time"),dataIndex:"update_time",isHideable:!0,width:"20%",render:function(e,t){return(0,C.getLocalTime)(e||t.status_time).fromNow()}}]},n.startUpload=function(){n.hideModal("createModal")(),n.showModal("uploadModal")()},n.handleCreate=function(e){n.store.create((0,i.default)({},e,{isv:n.workspace})).then((function(){n.hideModal("uploadModal")(),g.default.success({content:"".concat(t("Created Successfully"),"!")}),n.store.fetchList({isv:n.workspace})}))},n}return(0,f.default)(a,e),(0,u.default)(a,[{key:"init",value:function(){this.store=new P.default}},{key:"getData",value:function(e){this.store.fetchList((0,i.default)({isv:this.workspace,statistics:!0},e))}},{key:"getTableProps",value:function(){return(0,i.default)({},b.default.prototype.getTableProps.call(this),{onCreate:this.showModal("createModal"),selectActions:[]})}},{key:"renderEmpty",value:function(){var e=this.enabledActions.includes("create")?this.showModal("createModal"):null;return p.default.createElement(k.default,(0,o.default)({name:this.name,createText:t("Upload Template"),onCreate:e},this.getEmptyProps()))}},{key:"renderBannerImages",value:function(){return p.default.createElement(p.default.Fragment,null,p.default.createElement("img",{src:"/assets/banner/shape-5.svg",className:D.default.img1}),p.default.createElement("img",{src:"/assets/banner/shape-3.svg",className:D.default.img2}),p.default.createElement("img",{src:"/assets/banner/shape-4.svg",className:D.default.img3}))}},{key:"renderHeader",value:function(){return p.default.createElement(y.default,{className:D.default.header,title:t("App Templates"),description:t("APP_TEMPLATE_DESCRIPTION"),module:this.module,tips:this.tips,extra:this.renderBannerImages()})}},{key:"renderModals",value:function(){var e=this.store.isSubmitting,a=this.state,n=a.createModal,r=a.uploadModal;return p.default.createElement("div",null,p.default.createElement(w.default,{visible:n,onOk:this.startUpload,onCancel:this.hideModal("createModal")}),p.default.createElement(S.default,{title:t("UPLOAD_HELM_TITLE"),description:t("UPLOAD_HELM_DESC"),icon:"templet",type:"CREATE_APP",visible:r,isSubmitting:e,onOk:this.handleCreate,onCancel:this.hideModal("uploadModal")}))}},{key:"authKey",get:function(){return"apps"}},{key:"name",get:function(){return"Apps"}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"rowKey",get:function(){return"app_id"}},{key:"module",get:function(){return"apps"}},{key:"tips",get:function(){return[{title:t("DEVELOP_APP_TITLE"),description:t("DEVELOP_APP_DESC"),operation:this.enabledActions.includes("create")?p.default.createElement(_.default,{type:"flat",onClick:this.showModal("uploadModal")},t("Upload Template")):null,closable:!1},{title:t("HOW_PUBLISH_APP_TITLE"),description:t("HOW_PUBLISH_APP_DESC")}]}}]),a}(b.default))||l)||l;a.default=O},3268:function(e,a,n){"use strict";var r=n(81),l=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(n(70)),i=l(n(63)),s=l(n(13)),u=l(n(14)),d=l(n(17)),c=l(n(16)),f=l(n(18)),p=r(n(0)),m=l(n(1)),h=l(n(3)),v=l(n(387)),g=l(n(224)),_=l(n(3269)),y=n(49),k=l(n(3271)),b=function(e){function a(){return(0,s.default)(this,a),(0,d.default)(this,(0,c.default)(a).apply(this,arguments))}return(0,f.default)(a,e),(0,u.default)(a,[{key:"render",value:function(){var e=this.props,a=e.visible,n=(0,i.default)(e,["visible"]);return p.default.createElement(v.default,(0,o.default)({width:600,bodyClassName:k.default.body,visible:a,hideHeader:!0,hideFooter:!0},n),p.default.createElement("div",{className:(0,h.default)(k.default.header,"clearfix")},p.default.createElement("img",{src:"/assets/application.svg",alt:""}),p.default.createElement("div",{className:k.default.title}," ",t("Create App Template")),p.default.createElement("div",{className:k.default.description},t("CREATE_APP_DESC"))),p.default.createElement(_.default,{className:k.default.item,title:t("UPLOAD_HELM_TITLE"),show:!0},p.default.createElement("div",{className:k.default.more},p.default.createElement("div",{className:k.default.description},t("UPLOAD_HELM_DESCRIPTION")),p.default.createElement(g.default,{type:"control",onClick:this.props.onOk},t("START_UPLOAD")),p.default.createElement("div",{className:k.default.note},"ðŸ’â€â™‚ï¸ ",t("APP_CREATE_GUIDE"),p.default.createElement("a",{href:(0,y.getDocsUrl)("helm_specification"),target:"_blank"},"ã€Š",t("HELM_DEVELOP_GUIDE"),"ã€‹")))))}}]),a}(p.Component);a.default=b,b.propTypes={visible:m.default.bool,onOk:m.default.func,onCancel:m.default.func},b.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}}},3269:function(e,t,a){"use strict";var n=a(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(30)),l=n(a(13)),o=n(a(14)),i=n(a(17)),s=n(a(16)),u=n(a(18)),d=n(a(0)),c=a(1),f=n(a(3)),p=n(a(38)),m=n(a(3270)),h=function(e){function t(){var e,a;(0,l.default)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=(0,i.default)(this,(e=(0,s.default)(t)).call.apply(e,[this].concat(r)))).state={show:a.props.show,close:!1},a.toggle=function(){a.setState((function(e){return{show:!e.show}}))},a.close=function(){a.setState({close:!0})},a}return(0,u.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e,t=this.props,a=t.className,n=t.title,l=t.hasClose,o=t.description,i=t.children,s=this.state,u=s.show,c=s.close;return d.default.createElement("div",{className:(0,f.default)(m.default.item,(e={},(0,r.default)(e,m.default.hideBg,!u),(0,r.default)(e,m.default.close,c),e),a)},d.default.createElement("div",{className:m.default.name,onClick:this.toggle},d.default.createElement(p.default,{name:u?"chevron-down":"chevron-right",size:20}),n,l&&!u&&d.default.createElement(p.default,{onClick:this.close,name:"close",size:20,className:m.default.closeIcon})),d.default.createElement("div",{className:(0,f.default)(m.default.detail,(0,r.default)({},m.default.more,!u))},o||i))}}]),t}(d.default.Component);t.default=h,h.propTypes={title:c.PropTypes.string,description:c.PropTypes.string,show:c.PropTypes.bool,hasClose:c.PropTypes.bool},h.defaultProps={title:"",description:"",show:!1,hasClose:!1}},3270:function(e,t,a){e.exports={item:"ToggleView__item--2R-OA",hideBg:"ToggleView__hideBg--aSyW8",close:"ToggleView__close--3VPiR",name:"ToggleView__name--33hMf",closeIcon:"ToggleView__closeIcon--3PIL0",detail:"ToggleView__detail--QO8Fs",more:"ToggleView__more--3U3Wz"}},3271:function(e,t,a){e.exports={body:"AppCreate__body--3h99w",header:"AppCreate__header--28t6c",title:"AppCreate__title--rZl0p",description:"AppCreate__description--CTcfp",item:"AppCreate__item--1ytH-",more:"AppCreate__more--39jan",note:"AppCreate__note--2QwVb"}},3281:function(e,t,a){e.exports={header:"Apps__header--2uAal",img1:"Apps__img1--1AbUX",img2:"Apps__img2--8GjCp",img3:"Apps__img3--2N0fB"}},3282:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=r(n(97)),i=r(n(61)),s=r(n(37)),u=r(n(62)),d=r(n(13)),c=r(n(14)),f=r(n(17)),p=r(n(16)),m=r(n(18)),h=r(n(0)),v=n(2493),g=r(n(958)),_=r(n(38)),y=r(n(271)),k=r(n(2518)),b=r(n(2770)),E=r(n(388)),w=r(n(2519)),S=r(n(2521)),C=r(n(3283)),M=r(n(2524)),P=r(n(2523)),D=r(n(3285)),O=C.default,A=(0,v.inject)("rootStore")(l=(0,v.observer)(l=function(e){function a(){var e,n;(0,d.default)(this,a);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(n=(0,f.default)(this,(e=(0,p.default)(a)).call.apply(e,[this].concat(l)))).getColumns=function(){return[{title:t("Name"),dataIndex:"name",width:"30%",render:function(e,t){var a=t.description;return h.default.createElement(w.default,{icon:"catalog",iconSize:40,title:e,desc:a||"-",noLink:!0})}},{title:t("Status"),dataIndex:"status",isHideable:!0,width:"15%",render:function(e){return h.default.createElement(S.default,{type:e,name:t(e)})}},{title:t("URL"),dataIndex:"url"},{key:"more",width:20,render:n.renderMore}]},n.hideCreate=function(){n.setState({createModal:!1})},n.handleCreate=function(){var e=(0,u.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.store.create((0,s.default)({},t,{app_default_status:"active",workspace:n.workspace})).then((function(){n.getData(),n.hideCreate()}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.hideEdit=function(){n.setState({showEdit:!1})},n.handleEdit=function(e){n.store.update(e).then((function(){n.getData(),n.hideEdit()}))},n.hideBatchDelete=function(){n.setState({batchDeleteModal:!1})},n.handleBatchDelete=(0,u.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.selectedRepos,e.prev=1,e.next=4,n.store.delete({repo_id:t});case 4:n.hideBatchDelete(),n.getData(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])}))),n.hideDelete=function(){n.setState({showDelete:!1})},n.handleDelete=(0,u.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.selectRepo.repo_id,e.prev=1,e.next=4,n.store.delete({repo_id:t});case 4:n.hideDelete(),n.getData(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])}))),n.handleIndex=(0,u.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.selectedRepos.map(function(){var e=(0,u.default)(i.default.mark((function e(a){var r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.store.index({repo_id:a});case 2:r=e.sent,"success"===r.message&&E.default.success(t("Index Successfully"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:n.store.setSelectRowKeys([]);case 3:case"end":return e.stop()}}),e)}))),n.handleMoreClick=function(e){return function(t,a){switch(a){case"edit":n.setState({showEdit:!0,selectRepo:e});break;case"delete":n.setState({showDelete:!0,selectRepo:e})}}},n.renderMoreMenu=function(e){return h.default.createElement(y.default,{onClick:n.handleMoreClick(e)},n.enabledItemActions.map((function(e){return h.default.createElement(y.default.MenuItem,{key:e.key},h.default.createElement(_.default,{name:e.icon})," ",e.text)})))},n}return(0,m.default)(a,e),(0,c.default)(a,[{key:"init",value:function(){this.state={createModal:!1,batchDeleteModal:!1,showEdit:!1,showDelete:!1,selectRepo:{}},this.store=new b.default}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.store.fetchList((0,s.default)({status:"active",workspace:this.workspace},e))}},{key:"getTableProps",value:function(){return(0,s.default)({},k.default.prototype.getTableProps.call(this),{searchType:"keyword",actions:[{key:"create",type:"control",text:t("Create Repo"),action:"manage",onClick:this.showModal("createModal")}],selectActions:[{key:"index",type:"primary",text:t("Index Repo"),action:"manage",onClick:this.handleIndex}]})}},{key:"renderHeader",value:function(){return h.default.createElement(P.default,{title:t("App Repositories"),description:t("APP_REPO_DESC"),className:D.default.header,module:this.module,tips:this.tips})}},{key:"renderModals",value:function(){return h.default.createElement("div",null,h.default.createElement(C.default,{store:this.store,visible:this.state.createModal,isSubmitting:this.store.isSubmitting,onOk:this.handleCreate,onCancel:this.hideCreate}),h.default.createElement(O,{store:this.store,detail:this.state.selectRepo,visible:this.state.showEdit,isSubmitting:this.store.isSubmitting,onOk:this.handleEdit,onCancel:this.hideEdit}),h.default.createElement(M.default,{type:t(this.name),resource:this.state.selectRepo.name,visible:this.state.showDelete,isSubmitting:this.store.isSubmitting,onOk:this.handleDelete,onCancel:this.hideDelete}))}},{key:"name",get:function(){return"App Repository"}},{key:"authKey",get:function(){return"repos"}},{key:"rowKey",get:function(){return"repo_id"}},{key:"module",get:function(){return"repos"}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"enabledActions",get:function(){var e=globals.app.getActions({module:"repos",workspace:this.workspace});return[].concat((0,o.default)(e),(0,o.default)(e.includes("manage")?["create","edit","delete"]:[]))}},{key:"selectedRepos",get:function(){return this.store.list.selectedRowKeys.slice()}},{key:"selectedRepoNames",get:function(){var e=this.store.list.data;return this.selectedRepos.map((function(t){return(0,g.default)(e,{repo_id:t}).name}))}},{key:"itemActions",get:function(){return[{key:"edit",icon:"pen",text:t("Edit"),action:"edit"},{key:"delete",icon:"trash",text:t("Delete"),action:"delete"}]}},{key:"enabledItemActions",get:function(){var e=this;return this.itemActions.filter((function(t){return!t.action||e.enabledActions.includes(t.action)}))}},{key:"tips",get:function(){return[{title:t("HOW_TO_USE_APP_REPO_Q"),description:t("HOW_TO_USE_APP_REPO_A")}]}}]),a}(k.default))||l)||l;a.default=A},3283:function(e,a,n){"use strict";var r=n(81),l=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(n(70)),i=l(n(63)),s=l(n(13)),u=l(n(14)),d=l(n(17)),c=l(n(16)),f=l(n(18)),p=r(n(0)),m=l(n(1)),h=l(n(386)),v=l(n(2453)),g=l(n(387)),_=l(n(267)),y=l(n(3284)),k=l(n(2771)),b=function(e){function a(e){var t;return(0,s.default)(this,a),(t=(0,d.default)(this,(0,c.default)(a).call(this,e))).getFormData=function(e){return Object.assign({name:"",repoType:"Helm",type:"https",visibility:"public",credential:"{}",providers:["kubernetes"]},e)},t.handleSubmit=function(e){t.props.onOk(e).then((function(){t.setState({formData:t.getFormData({})})}))},t.handleCancel=function(){t.props.onCancel(),t.setState({formData:t.getFormData({})})},t.handleUrlValidate=function(e){t.setState({isValid:e.isValid})},t.formRef=p.default.createRef(),t.state={formData:t.getFormData(e.detail)},t}return(0,f.default)(a,e),(0,u.default)(a,[{key:"componentWillReceiveProps",value:function(e){e.detail!==this.props.detail&&this.setState({formData:this.getFormData(e.detail)})}},{key:"render",value:function(){var e=this.props,a=e.detail,n=e.store,r=(e.onOk,e.onCancel,(0,i.default)(e,["detail","store","onOk","onCancel"])),l=a?"Edit App Repository":"Add App Repository";return p.default.createElement(g.default.Form,(0,o.default)({bodyClassName:k.default.body,title:t(l),icon:"firewall",width:691,data:this.state.formData,onOk:this.handleSubmit,onCancel:this.handleCancel},r),p.default.createElement(_.default.Item,{label:t("App Repository Name"),rules:[{required:!0,message:t("Please input name")}]},p.default.createElement(h.default,{name:"name",autoFocus:!0})),p.default.createElement(_.default.Item,{label:t("Type")},p.default.createElement(h.default,{name:"repoType",defaultValue:"Helm",disabled:!0})),p.default.createElement(y.default,{store:n,formData:this.state.formData,onValidate:this.handleUrlValidate,isSubmitting:this.props.isSubmitting}),p.default.createElement(_.default.Item,{label:t("Description")},p.default.createElement(v.default,{name:"description",placeholder:t("SHORT_DESCRIPTION_DESC")})))}}]),a}(p.Component);a.default=b,b.propTypes={store:m.default.object,detail:m.default.object,visible:m.default.bool,isSubmitting:m.default.bool,onOk:m.default.func,onCancel:m.default.func},b.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},3284:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,i,s,u,d,c,f,p,m=r(n(37)),h=r(n(44)),v=r(n(13)),g=r(n(17)),_=r(n(16)),y=r(n(66)),k=r(n(14)),b=r(n(18)),E=r(n(41)),w=(r(n(45)),r(n(0))),S=r(n(1)),C=n(19),M=n(60),P=r(n(578)),D=r(n(58)),O=r(n(22)),A=r(n(115)),R=r(n(2475)),T=n(2553),I=r(n(386)),x=r(n(225)),N=r(n(227)),j=r(n(129)),L=r(n(224)),U=r(n(2771)),V=/^(http|https|s3):\/\//,H=[{label:"http://",value:"http"},{label:"https://",value:"https"},{label:"s3://",value:"s3"}],W=(0,M.observer)((p=f=function(e){function a(e){var n;(0,v.default)(this,a),n=(0,g.default)(this,(0,_.default)(a).call(this,e)),(0,h.default)(n,"handleTypeChange",i,(0,y.default)(n)),(0,h.default)(n,"handleUrlChange",s,(0,y.default)(n)),(0,h.default)(n,"handleAccessInputChange",u,(0,y.default)(n)),(0,h.default)(n,"handleVerify",d,(0,y.default)(n)),(0,h.default)(n,"handleVerifyResult",c,(0,y.default)(n));var r=(0,O.default)(e.formData,"type","http"),l=n.getUrl(e.formData),o=n.getCredential(e.formData);return(0,C.extendObservable)((0,y.default)(n),{type:r,url:l,credential:o,validateStatus:"",validateStatusCode:0,isValid:!1}),n.validateSchema=new P.default({url:function(e,a,r){n.isValid&&"success"===n.validateStatus?r():r(new Error(t("Invalid URL")))}}),n}return(0,b.default)(a,e),(0,k.default)(a,[{key:"store",get:function(){return this.props.store}}]),(0,k.default)(a,[{key:"getUrl",value:function(e){if(e.url){var t=new RegExp("^([\\s\\S]*?:\\/\\/)([\\s\\S]*)$","g").exec(e.url);return t?t[2]:""}return""}},{key:"getCredential",value:function(e){var t={access_key_id:"",secret_access_key:""};if(e.credential)try{return(0,m.default)({},t,JSON.parse(e.credential))}catch(e){}return t}},{key:"resetValidateStatus",value:function(){this.validateStatus="",this.validate()}},{key:"checkVerifyEnable",value:function(){if("validating"===this.validateStatus)return!1;if("s3"===this.type){var e=this.credential,t=e.access_key_id,a=e.secret_access_key;return!(0,D.default)(this.url)&&!(0,D.default)(t)&&!(0,D.default)(a)}return!(0,D.default)(this.url)}},{key:"validate",value:function(){var e=this.props,t=e.formData,a=e.onValidate;this.validateSchema.validate(t,{first:!0},(function(e,t){a({isValid:(0,D.default)(t)})}))}},{key:"render",value:function(){return w.default.createElement("div",{className:U.default.urlInput},this.renderField(),this.renderAccess())}},{key:"renderValidateStatus",value:function(){var e=this.validateStatus,a=this.validateStatusCode;if(""===e)return null;var n="validating"===e?w.default.createElement(j.default,{size:16}):w.default.createElement(N.default,{placement:"top",content:"success"===e?t("Valid URL"):(0,T.checkRepoInvalidReason)(a)},w.default.createElement("span",{className:"icon icon-".concat(e)}));return w.default.createElement("div",{className:U.default.validStatus},n)}},{key:"renderField",value:function(){return w.default.createElement("div",{className:U.default.field},w.default.createElement("label",{className:U.default.label},t("URL"),":"),w.default.createElement("div",{className:U.default.fieldInput},w.default.createElement(x.default,{className:U.default.protocol,value:this.type,options:H,onChange:this.handleTypeChange}),w.default.createElement(I.default,{className:U.default.url,type:"text",name:"url",value:this.url,validateStatus:this.validateStatus,placeholder:"eg. https://github.com/mycompany/mycaâ€¦",onChange:this.handleUrlChange}),this.renderValidateStatus(),"s3"!==this.type&&w.default.createElement(L.default,{className:U.default.verifyBtn,onClick:this.handleVerify,disabled:!this.checkVerifyEnable()||this.props.isSubmitting},t("Validate"))),w.default.createElement("div",{className:U.default.desc},t("APP_REPO_URL_DESC")))}},{key:"renderAccess",value:function(){return"s3"!==this.type?null:w.default.createElement("div",{className:U.default.access},w.default.createElement("div",{className:U.default.accessItem},w.default.createElement("label",{className:U.default.label},t("Access Key ID"),":"),w.default.createElement(I.default,{name:"access_key_id",value:this.credential.access_key_id,onChange:this.handleAccessInputChange})),w.default.createElement("div",{className:U.default.accessItem},w.default.createElement("label",{className:U.default.label},t("Secret Access Key"),":"),w.default.createElement(I.default,{name:"secret_access_key",value:this.credential.secret_access_key,onChange:this.handleAccessInputChange})),w.default.createElement(L.default,{className:U.default.verifyBtn,onClick:this.handleVerify,disabled:!this.checkVerifyEnable()||this.props.isSubmitting},t("Validate")))}}]),a}(w.default.Component),f.propTypes={formData:S.default.object,onValidate:S.default.func,isSubmitting:S.default.bool},f.defaultProps={formData:{},onValidate:function(){},isSubmitting:!1},o=p,i=(0,E.default)(o.prototype,"handleTypeChange",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=e.props.formData;(0,A.default)(a,"credential","s3"===t?JSON.stringify(e.credential):"{}"),(0,A.default)(a,"type",t),e.type=t,V.test(e.url)||(0,A.default)(a,"url","".concat(t,"://").concat(e.url)),e.resetValidateStatus()}}}),s=(0,E.default)(o.prototype,"handleUrlChange",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){var n=e.props.formData,r=(0,R.default)(a);(0,A.default)(n,"url",V.test(r)?r:"".concat(e.type,"://").concat(r)),e.url=r,e.resetValidateStatus()}}}),u=(0,E.default)(o.prototype,"handleAccessInputChange",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.target.name;e.credential[a]=t.target.value,(0,A.default)(e.props.formData,"credential",JSON.stringify(e.credential)),e.resetValidateStatus()}}}),d=(0,E.default)(o.prototype,"handleVerify",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.validateStatus="validating";var t=e.props.formData,a=t.url,n=t.credential;e.store.validate({type:e.type,url:a,credential:n}).then((function(t){e.handleVerifyResult(t.ok,t.errorCode)})).catch((function(){e.handleVerifyResult(!1)}))}}}),c=(0,E.default)(o.prototype,"handleVerifyResult",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){e.validateStatus=t?"success":"error",e.validateStatusCode=t?0:a,e.isValid=t,e.validate()}}}),(0,E.default)(o.prototype,"resetValidateStatus",[C.action],Object.getOwnPropertyDescriptor(o.prototype,"resetValidateStatus"),o.prototype),l=o))||l;a.default=W},3285:function(e,t,a){e.exports={wrapper:"Repos__wrapper--AcTTN",header:"Repos__header--1NxkX",toolbar:"Repos__toolbar--noUpv",empty:"Repos__empty--1Kv5-",list:"Repos__list--etEEN",loading:"Repos__loading--1l8i2",footer:"Repos__footer--3vvHl"}},3286:function(e,t,a){"use strict";var n=a(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(564),l=n(a(3287)),o=n(a(3289)),i=n(a(3294)),s="/workspaces/:workspace/overview",u=[{name:"usage",title:"Resources Usage",component:o.default},{name:"ranking",title:"Usage Ranking",component:i.default}],d=[{path:s,component:l.default,routes:(0,r.getChildRoutes)(u,s)}];t.default=d},3287:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=r(n(13)),i=r(n(14)),s=r(n(17)),u=r(n(16)),d=r(n(18)),c=r(n(0)),f=n(60),p=n(564),m=r(n(2523)),h=r(n(3288)),v=(0,f.inject)("rootStore")(l=(0,f.observer)(l=function(e){function a(){return(0,o.default)(this,a),(0,s.default)(this,(0,u.default)(a).apply(this,arguments))}return(0,d.default)(a,e),(0,i.default)(a,[{key:"renderBanner",value:function(){var e=this.props.route;return c.default.createElement("div",{className:h.default.banner},c.default.createElement(m.default,{className:h.default.header,icon:"dashboard",title:t("Overview"),description:t("WORKSPACE_OVERVIEW_DESC"),module:this.module,routes:e.routes}))}},{key:"render",value:function(){var e=this.props.route;return c.default.createElement("div",{className:h.default.wrapper},this.renderBanner(),c.default.createElement("div",{className:h.default.main},(0,p.renderRoutes)(e.routes)))}}]),a}(c.default.Component))||l)||l;a.default=v},3288:function(e,t,a){e.exports={banner:"Overview__banner--3M6mE",main:"Overview__main--34tJ8"}},3289:function(e,t,a){"use strict";var n=a(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,l=n(a(13)),o=n(a(14)),i=n(a(17)),s=n(a(16)),u=n(a(18)),d=n(a(0)),c=a(60),f=n(a(3290)),p=n(a(3292)),m=n(a(3293)),h=(0,c.inject)("rootStore")(r=function(e){function t(){return(0,l.default)(this,t),(0,i.default)(this,(0,s.default)(t).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"renderResourceCount",value:function(){return d.default.createElement(f.default,{workspace:this.workspace})}},{key:"renderPhysicalResource",value:function(){return d.default.createElement(p.default,{workspace:this.workspace})}},{key:"renderVirtualResource",value:function(){return d.default.createElement(m.default,{workspace:this.workspace})}},{key:"render",value:function(){return d.default.createElement("div",null,this.renderResourceCount(),this.renderPhysicalResource(),this.renderVirtualResource())}},{key:"workspace",get:function(){return this.props.match.params.workspace}}]),t}(d.default.Component))||r;t.default=h},3290:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=r(n(82)),i=r(n(61)),s=r(n(62)),u=r(n(13)),d=r(n(14)),c=r(n(17)),f=r(n(16)),p=r(n(18)),m=r(n(0)),h=n(19),v=n(60),g=r(n(22)),_=n(114),y=r(n(2598)),k=n(938),b=r(n(129)),E=r(n(2516)),w=r(n(2594)),S=r(n(3291)),C=(0,v.inject)("rootStore")(l=(0,v.observer)(l=function(e){function a(e){var t;return(0,u.default)(this,a),(t=(0,c.default)(this,(0,f.default)(a).call(this,e))).fetchData=(0,s.default)(i.default.mark((function e(){var a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.monitorStore.fetchStatistics(t.workspace),!globals.app.hasKSModule("devops")){e.next=6;break}return e.next=4,t.monitorStore.getDevopsCount(t.workspace);case 4:a=e.sent,t.setState({devopsCount:a});case 6:case"end":return e.stop()}}),e)}))),t.getLink=function(e){var a=globals.app.getActions({module:e,workspace:t.workspace});return a.includes("view")||a.includes("manage")?"/workspaces/".concat(t.workspace,"/").concat(e):null},t.getMetrics=function(){var e=(0,h.toJS)(t.monitorStore.statistics.data),a={};return Object.entries(e).forEach((function(e){var t=(0,o.default)(e,2),n=t[0],r=t[1];a[n]=(0,g.default)(r,"data.result[0].value[1]",0)})),a},t.state={devopsCount:""},t.workspace=e.workspace,t.monitorStore=new y.default,t.fetchData(),t}return(0,p.default)(a,e),(0,d.default)(a,[{key:"render",value:function(){var e=this.monitorStore.statistics.isLoading,a=this.getMetrics();return m.default.createElement(b.default,{spinning:e},m.default.createElement(E.default,{className:S.default.card},m.default.createElement(k.Columns,null,m.default.createElement(k.Column,null,m.default.createElement(w.default,{icon:_.ICON_TYPES.projects,desc:t("Projects"),title:a.workspace_namespace_count,url:this.getLink("projects"),size:"large"})),globals.app.hasKSModule("devops")&&m.default.createElement(k.Column,null,m.default.createElement(w.default,{icon:_.ICON_TYPES.devops,desc:t("DevOps Projects"),title:this.state.devopsCount,url:this.getLink("devops"),size:"large"})),m.default.createElement(k.Column,null,m.default.createElement(w.default,{icon:_.ICON_TYPES.roles,desc:t("Roles"),title:a.workspace_role_count,url:this.getLink("roles"),size:"large"})),m.default.createElement(k.Column,null,m.default.createElement(w.default,{icon:_.ICON_TYPES.members,desc:t("Workspace Members"),title:a.workspace_member_count,url:this.getLink("members"),size:"large"})))))}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),a}(m.default.Component))||l)||l;a.default=C},3291:function(e,t,a){e.exports={card:"Statistics__card--2Mzfc"}},3292:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=r(n(37)),i=r(n(13)),s=r(n(14)),u=r(n(17)),d=r(n(16)),c=r(n(18)),f=n(60),p=r(n(22)),m=r(n(2598)),h=n(2740),v={cpu_usage:"workspace_cpu_usage",memory_usage:"workspace_memory_usage_wo_cache",disk_usage:"workspace_disk_size_usage"},g=(0,f.inject)("rootStore")(l=(0,f.observer)(l=function(e){function a(){var e,n;(0,i.default)(this,a);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return(n=(0,u.default)(this,(e=(0,d.default)(a)).call.apply(e,[this].concat(l)))).getMonitoringCfgs=function(){return[{type:"cpu",title:"CPU Usage",unitType:"cpu",legend:["CPU"],metricType:v.cpu_usage},{type:"memory",title:"Memory Usage",unitType:"memory",legend:["Memory"],metricType:v.memory_usage}]},n.getControllerProps=function(){return{title:t("Physical Resources Usage"),createTime:n.createTime}},n.fetchData=function(e){n.monitorStore.fetchMetrics((0,o.default)({workspace:n.workspace,metrics:Object.values(v)},e))},n}return(0,c.default)(a,e),(0,s.default)(a,[{key:"init",value:function(){this.monitorStore=new m.default}},{key:"workspace",get:function(){return this.props.workspace}},{key:"createTime",get:function(){return(0,p.default)(this.props.rootStore,"workspace.detail.createTime")}}]),a}(h.Component))||l)||l;a.default=g},3293:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=r(n(37)),i=r(n(13)),s=r(n(14)),u=r(n(17)),d=r(n(16)),c=r(n(18)),f=n(60),p=r(n(22)),m=r(n(2598)),h=n(2743),v={deployment_count:"workspace_deployment_count",statefulset_count:"workspace_statefulset_count",daemonset_count:"workspace_daemonset_count",job_count:"workspace_job_count",cronjob_count:"workspace_cronjob_count",pvc_count:"workspace_pvc_count",service_count:"workspace_service_count",route_count:"workspace_ingresses_extensions_count",pod_running_count:"workspace_pod_running_count"},g=(0,f.inject)("rootStore")(l=(0,f.observer)(l=function(e){function a(){var e,n;(0,i.default)(this,a);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return(n=(0,u.default)(this,(e=(0,d.default)(a)).call.apply(e,[this].concat(l)))).getMonitoringCfgs=function(){return[{type:"deployment",title:"Deployments",legend:["Deployments"],metricType:v.deployment_count},{type:"statefulset",title:"StatefulSets",legend:["StatefulSets"],metricType:v.statefulset_count},{type:"daemonset",title:"DaemonSets",legend:["DaemonSets"],metricType:v.daemonset_count},{type:"job",title:"Jobs",legend:["Jobs"],metricType:v.job_count},{type:"cronjob",title:"CronJobs",legend:["CronJobs"],metricType:v.cronjob_count},{type:"pvc",title:"Volumes",legend:["Volumes"],metricType:v.pvc_count},{type:"service",title:"Services",legend:["Services"],metricType:v.service_count},{type:"routes",title:"Routes",legend:["Routes"],metricType:v.route_count},{type:"pod",title:"Pods",legend:["Running Pods"],metricType:v.pod_running_count}]},n.getControllerProps=function(){return{title:t("Application Resources Usage"),createTime:n.createTime}},n.fetchData=function(e){n.monitorStore.fetchMetrics((0,o.default)({workspace:n.workspace,metrics:Object.values(v)},e))},n}return(0,c.default)(a,e),(0,s.default)(a,[{key:"init",value:function(){this.monitorStore=new m.default}},{key:"workspace",get:function(){return this.props.workspace}},{key:"createTime",get:function(){return(0,p.default)(this.props.rootStore,"workspace.detail.createTime")}}]),a}(h.Component))||l)||l;a.default=g},3294:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=r(n(13)),i=r(n(14)),s=r(n(17)),u=r(n(16)),d=r(n(18)),c=r(n(0)),f=n(60),p=r(n(3)),m=r(n(22)),h=r(n(2744)),v=r(n(949)),g=n(938),_=r(n(38)),y=r(n(129)),k=r(n(224)),b=r(n(2583)),E=r(n(2745)),w=r(n(3295)),S=(0,f.inject)("rootStore")(l=(0,f.observer)(l=function(e){function a(e){var t;return(0,o.default)(this,a),(t=(0,s.default)(this,(0,u.default)(a).call(this,e))).export=function(){t.store.download("project.usage.rank.json")},t.store=new h.default({workspace:t.workspace,limit:10,sort_type:"desc"}),t}return(0,d.default)(a,e),(0,i.default)(a,[{key:"componentDidMount",value:function(){this.store.fetchAll()}},{key:"render",value:function(){return c.default.createElement("div",{className:w.default.wrapper},this.renderToolbar(),this.renderList())}},{key:"renderToolbar",value:function(){return c.default.createElement("div",{className:(0,p.default)(w.default.toolbar,w.default.pane__toolbar,w.default.pane)},c.default.createElement("div",{className:w.default.toolbar_filter},c.default.createElement(b.default,{store:this.store}),c.default.createElement("span",{className:w.default.sort_button},c.default.createElement(_.default,{name:"desc"===this.store.sort_type?"sort-descending":"sort-ascending",type:"coloured",size:"small",onClick:this.store.changeSortType}))),c.default.createElement("div",{className:w.default.toolbar_buttons},c.default.createElement(k.default,{onClick:this.export},t("Export"))))}},{key:"renderList",value:function(){return c.default.createElement(y.default,{spinning:this.store.isLoading},c.default.createElement("div",null,c.default.createElement(E.default,{store:this.store}),this.renderPagination()))}},{key:"renderPagination",value:function(){var e=this.store,t=e.page,a=e.total_page,n=this.store.limit;return c.default.createElement("div",{className:(0,p.default)(w.default.pane,w.default.pane__pagination)},c.default.createElement(g.Level,null,c.default.createElement(g.LevelLeft,null),c.default.createElement(g.LevelRight,null,c.default.createElement(v.default,{current:t,total:a*n,pageSize:n,onChange:this.store.changePagination}))))}},{key:"workspace",get:function(){return(0,m.default)(this.props,"match.params.workspace")}}]),a}(c.default.Component))||l)||l;a.default=S},3295:function(e,t,a){e.exports={wrapper:"UsageRanking__wrapper--XOE-c",pane:"UsageRanking__pane--4eoZy",pane__toolbar:"UsageRanking__pane__toolbar--3ogot",pane__pagination:"UsageRanking__pane__pagination--2-8FI",title:"UsageRanking__title--2qPKz",toolbar:"UsageRanking__toolbar--2RBEs",toolbar_buttons:"UsageRanking__toolbar_buttons--2GVcD",toolbar_filter:"UsageRanking__toolbar_filter--3bcXJ",sort_button:"UsageRanking__sort_button--1GoQ0",table:"UsageRanking__table--3wbjO",table_rank:"UsageRanking__table_rank--3nh1u",table_no_border:"UsageRanking__table_no_border--33558",rankList_row:"UsageRanking__rankList_row--3VpL4",rankLink__sort_col:"UsageRanking__rankLink__sort_col--FenZs"}},3296:function(e,t,a){"use strict";var n=a(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(49),l=a(564),o=n(a(2517)),i=n(a(3297)),s=n(a(3298)),u=n(a(3299)),d="/workspaces/:workspace/roles/:role",c=[{path:d,component:(0,r.withProps)(o.default,{module:"roles",component:i.default,breadcrumbs:[{label:"Workspace",url:"/workspaces/:workspace"},{label:"Roles",url:"/workspaces/:workspace/roles"}]}),routes:[{name:"authorizations",path:"".concat(d,"/authorizations"),title:"Authorization List",component:s.default},{name:"users",path:"".concat(d,"/users"),title:"Authorized Users",component:u.default},(0,l.getIndexRoute)({path:d,to:"".concat(d,"/authorizations"),exact:!0}),(0,l.getIndexRoute)({path:"*",to:"/404",exact:!0})]}];t.default=c},3297:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,i=r(n(13)),s=r(n(14)),u=r(n(17)),d=r(n(16)),c=r(n(18)),f=r(n(41)),p=r(n(22)),m=n(19),h=n(60),v=r(n(2631)),g=r(n(2520)),_=(0,h.inject)("rootStore")(l=(0,h.observer)((o=function(e){function a(){var e,n;(0,i.default)(this,a);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(n=(0,u.default)(this,(e=(0,d.default)(a)).call.apply(e,[this].concat(l)))).getOperations=function(){return[]},n.getAttrs=function(){return[{name:t("Workspace"),value:n.workspace},{name:t("Created Time"),value:n.createTime},{name:t("Creator"),value:n.creator}]},n}return(0,c.default)(a,e),(0,s.default)(a,[{key:"init",value:function(){this.store=new v.default}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"listUrl",get:function(){return"/workspaces/".concat(this.workspace,"/roles")}},{key:"detailName",get:function(){return this.store.detail.aliasName}},{key:"detailDesc",get:function(){var e=this.store.detail.aliasName,a=(0,p.default)(this.store.detail,"description");return globals.config.presetWorkspaceRoles.includes(e)?t(a):a}}]),a}(g.default),(0,f.default)(o.prototype,"detailName",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"detailName"),o.prototype),(0,f.default)(o.prototype,"detailDesc",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"detailDesc"),o.prototype),l=o))||l)||l;a.default=_},3298:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=r(n(13)),i=r(n(14)),s=r(n(17)),u=r(n(16)),d=r(n(18)),c=r(n(0)),f=n(19),p=n(60),m=r(n(2516)),h=r(n(2646)),v=(0,p.observer)(l=function(e){function a(){return(0,o.default)(this,a),(0,s.default)(this,(0,u.default)(a).apply(this,arguments))}return(0,d.default)(a,e),(0,i.default)(a,[{key:"componentDidMount",value:function(){this.props.detailStore.fetchRules(this.props.match.params)}},{key:"render",value:function(){var e=(0,f.toJS)(this.props.detailStore.rules).data;return c.default.createElement(m.default,{title:t("Authorization List"),empty:t("No Authorization"),isEmpty:e.length<=0},c.default.createElement(h.default,{rules:e}))}}]),a}(c.default.Component))||l;a.default=v},3299:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=r(n(13)),i=r(n(14)),s=r(n(17)),u=r(n(16)),d=r(n(18)),c=r(n(0)),f=n(19),p=n(60),m=r(n(2456)),h=r(n(2516)),v=n(49),g=r(n(2584)),_=(0,p.observer)(l=function(e){function a(){var e,n;(0,o.default)(this,a);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(n=(0,s.default)(this,(e=(0,u.default)(a)).call.apply(e,[this].concat(l)))).getColumns=function(){return[{title:t("User Name"),dataIndex:"username",width:"33%"},{title:t("Status"),dataIndex:"status",width:"33%",render:function(e){return c.default.createElement(g.default,{status:e})}},{title:t("Last Login Time"),dataIndex:"last_login_time",width:"33%",render:function(e){return c.default.createElement("p",null,e?(0,v.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):t("Not logged in yet"))}}]},n}return(0,d.default)(a,e),(0,i.default)(a,[{key:"componentDidMount",value:function(){this.props.detailStore.fetchUsers(this.props.match.params)}},{key:"render",value:function(){var e=(0,f.toJS)(this.props.detailStore.users),a=e.data,n=e.isLoading;return c.default.createElement(h.default,{title:t("Authorized Users")},c.default.createElement(m.default,{dataSource:a,columns:this.getColumns(),loading:n}))}}]),a}(c.default.Component))||l;a.default=_},3300:function(e,t,a){"use strict";var n=a(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(49),l=a(564),o=n(a(2517)),i=n(a(3301)),s=n(a(3304)),u=n(a(3306)),d="/workspaces/:workspace/members/:member",c=[{name:"projects",path:"".concat(d,"/projects"),title:"Projects",component:s.default},{name:"devops",path:"".concat(d,"/devops"),title:"DevOps Projects",component:u.default,ksModule:"devops"}],f=[{path:d,component:(0,r.withProps)(o.default,{module:"users",component:i.default,breadcrumbs:[{label:"Workspace",url:"/workspaces/:workspace"},{label:"Members",url:"/workspaces/:workspace/members"}]}),routes:(0,l.getChildRoutes)(c,d)}];t.default=f},3301:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=r(n(13)),i=r(n(14)),s=r(n(17)),u=r(n(16)),d=r(n(18)),c=r(n(0)),f=n(60),p=n(19),m=r(n(2593)),h=r(n(2520)),v=r(n(388)),g=r(n(2524)),_=r(n(3302)),y=(0,f.inject)("rootStore")(l=(0,f.observer)(l=function(e){function a(){var e,n;(0,o.default)(this,a);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(n=(0,s.default)(this,(e=(0,u.default)(a)).call.apply(e,[this].concat(l)))).getOperations=function(){return[{key:"delete",type:"default",text:t("Remove from Workspace"),action:"delete",onClick:n.showModal("deleteModule")}]},n.getAttrs=function(){var e=(0,p.toJS)(n.store).detail;return[{name:t("Workspace"),value:n.workspace},{name:t("Workspace Role"),value:e.workspace_role},{name:t("Email"),value:e.email}]},n.handleDelete=function(){var e=n.props.match.params,a=e.workspace,r=e.member;n.store.deleteMember({workspace:a},[r]).then((function(){n.hideModal("deleteModule")(),v.default.success({content:"".concat(t("Deleted Successfully"),"!")})}))},n}return(0,d.default)(a,e),(0,i.default)(a,[{key:"init",value:function(){this.store=new m.default}},{key:"renderSider",value:function(){var e=(0,p.toJS)(this.store).detail;return c.default.createElement(_.default,{iconSrc:e.avatar_url,name:e.username,desc:e.description,operations:this.getEnabledOperations(),attrs:this.getAttrs()})}},{key:"renderModals",value:function(){var e=this.state.deleteModule,a=(0,p.toJS)(this.store).detail;return c.default.createElement("div",null,c.default.createElement(g.default,{desc:t.html("REMOVE_USER_TIP",{resource:a.username}),visible:e,onOk:this.handleDelete,onCancel:this.hideModal("deleteModule")}),this.renderExtraModals())}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"name",get:function(){return"Workspace Member"}},{key:"authKey",get:function(){return"members"}},{key:"listUrl",get:function(){return"/workspaces/".concat(this.workspace,"/members")}}]),a}(h.default))||l)||l;a.default=y},3302:function(e,t,a){"use strict";var n=a(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(13)),l=n(a(14)),o=n(a(17)),i=n(a(16)),s=n(a(18)),u=n(a(0)),d=n(a(2541)),c=n(a(3303)),f=function(e){function t(){return(0,r.default)(this,t),(0,o.default)(this,(0,i.default)(t).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"renderName",value:function(){var e=this.props,t=e.iconSrc,a=e.name;return u.default.createElement("div",{className:c.default.name,title:a},u.default.createElement("img",{src:t||"/assets/default-user.svg",alt:""}),a)}}]),t}(d.default);t.default=f},3303:function(e,t,a){e.exports={name:"BaseInfo__name--2zToJ"}},3304:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=r(n(13)),i=r(n(14)),s=r(n(17)),u=r(n(16)),d=r(n(18)),c=r(n(0)),f=n(19),p=n(60),m=n(49),h=r(n(2456)),v=r(n(2519)),g=r(n(2516)),_=r(n(3305)),y=(0,p.observer)(l=function(e){function a(){var e,n;(0,o.default)(this,a);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(n=(0,s.default)(this,(e=(0,u.default)(a)).call.apply(e,[this].concat(l)))).getColumns=function(){return[{title:t("Name"),dataIndex:"name",width:"33%",render:function(e,t){return c.default.createElement(v.default,{to:"/projects/".concat(e),icon:"project",title:(0,m.getDisplayName)(t)})}},{title:t("Created Time"),dataIndex:"createTime",width:"33%",render:function(e){return c.default.createElement("p",null,(0,m.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"))}}]},n}return(0,d.default)(a,e),(0,i.default)(a,[{key:"componentDidMount",value:function(){this.props.detailStore.fetchProjects(this.props.match.params)}},{key:"render",value:function(){var e=(0,f.toJS)(this.props.detailStore.projects),a=e.data,n=e.isLoading;return c.default.createElement(g.default,{title:t("Projects")},c.default.createElement(h.default,{className:_.default.table,dataSource:a,columns:this.getColumns(),loading:n}))}},{key:"workspace",get:function(){return this.props.match.params.workspace}}]),a}(c.default.Component))||l;a.default=y},3305:function(e,t,a){e.exports={table:"Projects__table--WRBc9"}},3306:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=r(n(13)),i=r(n(14)),s=r(n(17)),u=r(n(16)),d=r(n(18)),c=r(n(0)),f=n(19),p=n(60),m=n(49),h=r(n(2456)),v=r(n(2519)),g=r(n(2516)),_=r(n(3307)),y=(0,p.observer)(l=function(e){function a(){var e,n;(0,o.default)(this,a);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(n=(0,s.default)(this,(e=(0,u.default)(a)).call.apply(e,[this].concat(l)))).getColumns=function(){return[{title:t("Name"),dataIndex:"name",width:"33%",render:function(e,t){return c.default.createElement(v.default,{to:"/devops/".concat(t.project_id),icon:"project",title:(0,m.getDisplayName)(t)})}},{title:t("Created Time"),dataIndex:"createTime",width:"33%",render:function(e){return c.default.createElement("p",null,(0,m.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"))}}]},n}return(0,d.default)(a,e),(0,i.default)(a,[{key:"componentDidMount",value:function(){this.props.detailStore.fetchDevOps(this.props.match.params)}},{key:"render",value:function(){var e=(0,f.toJS)(this.props.detailStore.devops),a=e.data,n=e.isLoading;return c.default.createElement(g.default,{title:t("DevOps Projects")},c.default.createElement(h.default,{className:_.default.table,dataSource:a,columns:this.getColumns(),loading:n}))}}]),a}(c.default.Component))||l;a.default=y},3307:function(e,t,a){e.exports={table:"DevOps__table--1igO6"}},3308:function(e,t,a){"use strict";var n=a(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(49),l=a(564),o=n(a(2517)),i=n(a(2772)),s=n(a(2779)),u=n(a(2781)),d=n(a(2782)),c=n(a(3335)),f="/workspaces/:workspace/apps/:appId",p=[{name:"versions",title:"Versions",component:i.default},{name:"app-information",title:"App Information",component:s.default},{name:"audit-records",title:"Audit Records",component:u.default},{name:"app-instances",title:"App Instances",component:d.default}],m=[{path:f,component:(0,r.withProps)(o.default,{module:"applications",component:c.default,breadcrumbs:[{label:"Workspaces",url:"/workspaces/:workspace"},{label:"Applications",url:"/workspaces/:workspace/apps"}]}),ksModule:"openpitrix",routes:(0,l.getChildRoutes)(p,f)}];t.default=m},3335:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,i=r(n(63)),s=r(n(13)),u=r(n(14)),d=r(n(17)),c=r(n(16)),f=r(n(18)),p=r(n(41)),m=r(n(0)),h=n(19),v=n(60),g=r(n(22)),_=r(n(2457)),y=r(n(388)),k=r(n(944)),b=r(n(2520)),E=r(n(2541)),w=r(n(3336)),S=r(n(2661)),C=r(n(2777)),M=r(n(2572)),P=r(n(2555)),D=n(2553),O=n(49),A=r(n(3344)),R=(0,v.inject)("rootStore")(l=(0,v.observer)((o=function(e){function a(){var e,n;(0,s.default)(this,a);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(n=(0,d.default)(this,(e=(0,c.default)(a)).call.apply(e,[this].concat(l)))).getOperations=function(){return[{key:"editApp",type:"control",text:t("Edit Info"),action:"manage",onClick:n.showModal("editApp")},{key:"appDeploy",icon:"snapshot",text:t("Deploy"),action:"manage",onClick:n.showModal("appDeploy")},{key:"addVersion",icon:"tag",text:t("New Version"),action:"manage",onClick:n.showModal("helmUpload")},{key:"delete",icon:"trash",text:t("Delete"),action:"manage",onClick:n.showModal("deleteModule")}]},n.getAttrs=function(){var e=(0,h.toJS)(n.store.detail),a=(0,g.default)(e,"create_time",new Date);return[{name:t("App Number"),value:e.app_id},{name:t("Status"),value:t((0,_.default)((0,D.transferAppStatus)(e.status)))},{name:t("Category"),value:(0,D.getAppCategoryNames)((0,g.default)(e,"category_set",[]))},{name:t("App Version Types"),value:(0,D.getVersionTypesName)((0,g.default)(e,"app_version_types",""))},{name:t("App Provider"),value:(0,g.default)(e,"isv","-")},{name:t("Created Time"),value:(0,O.getLocalTime)(a).format("YYYY-MM-DD HH:mm:ss")}]},n.saveApp=function(e){n.store.update(e).then((function(){n.hideModal("editApp")(),y.default.success({content:"".concat(t("Modify Successfully"),"!")}),n.fetchData()}))},n.handleAddVersion=function(e){n.versionStore.create(e).then((function(){n.hideModal("helmUpload")(),y.default.success({content:"".concat(t("Add Version Successfully"),"!")}),n.fetchData()}))},n.handleDeploy=function(e){e.workspace;var a=e.namespace,r=(0,i.default)(e,["workspace","namespace"]);n.store.deploy(r,{namespace:a}).then((function(){n.hideModal("appDeploy")(),y.default.success({content:"".concat(t("Deploy Successfully"),"!")}),n.fetchData()}))},n}return(0,f.default)(a,e),(0,u.default)(a,[{key:"init",value:function(){this.store=new M.default,this.versionStore=new P.default}},{key:"renderSider",value:function(){var e=this.store.detail,t=m.default.createElement("div",{className:A.default.appName},m.default.createElement(k.default,{iconSize:32,iconLetter:e.name,src:e.icon,alt:""}));return m.default.createElement(E.default,{icon:t,name:(0,g.default)(e,"name",""),desc:this.detailDesc,operations:this.getEnabledOperations(),labels:this.labels,attrs:this.getAttrs()})}},{key:"renderExtraModals",value:function(){var e=this.store,a=e.detail,n=e.isSubmitting,r=this.state,l=r.editApp,o=r.helmUpload;return m.default.createElement("div",null,m.default.createElement(w.default,{isSubmitting:n,title:t("Edit App Information"),description:t("EDIT_APP_DESC"),icon:"pen",visible:l,onOk:this.saveApp,onCancel:this.hideModal("editApp"),detail:(0,h.toJS)(a),store:this.store}),m.default.createElement(S.default,{title:t("UPLOAD_HELM_TITLE"),description:t("New Version"),icon:"templet",visible:o,appId:a.app_id,isSubmitting:n,type:"ADD_VERSION",onOk:this.handleAddVersion,onCancel:this.hideModal("helmUpload")}),m.default.createElement(C.default,{title:a.name,description:a.description,params:this.props.match.params,app:(0,h.toJS)(a),visible:this.state.appDeploy,isSubmitting:n,onOk:this.handleDeploy,onCancel:this.hideModal("appDeploy")}))}},{key:"authKey",get:function(){return"apps"}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"listUrl",get:function(){return"/workspaces/".concat(this.workspace,"/apps")}},{key:"detailName",get:function(){return this.store.detail.name}},{key:"detailDesc",get:function(){return this.store.detail.description}}]),a}(b.default),(0,p.default)(o.prototype,"detailName",[h.computed],Object.getOwnPropertyDescriptor(o.prototype,"detailName"),o.prototype),(0,p.default)(o.prototype,"detailDesc",[h.computed],Object.getOwnPropertyDescriptor(o.prototype,"detailDesc"),o.prototype),l=o))||l)||l;a.default=R},3336:function(e,t,a){"use strict";var n=a(81),r=a(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a(70)),o=r(a(63)),i=r(a(61)),s=r(a(62)),u=r(a(13)),d=r(a(14)),c=r(a(17)),f=r(a(16)),p=r(a(18)),m=n(a(0)),h=r(a(1)),v=a(19),g=r(a(22)),_=r(a(115)),y=r(a(2466)),k=r(a(268)),b=a(938),E=r(a(387)),w=r(a(3337)),S=r(a(3339)),C=r(a(3341)),M=r(a(2664)),P=r(a(2558)),D=r(a(3343)),O=function(e){function t(e){var a;return(0,u.default)(this,t),(a=(0,c.default)(this,(0,f.default)(t).call(this,e))).handleAppChange=(0,k.default)((function(e,t){(0,_.default)(a.props.detail,t,e)}),200),a.handleOk=(0,s.default)(i.default.mark((function e(){var t,n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,y.default)(a.props.detail,["app_id","name","abstraction","description","home","category_id","readme"]),(n=a.formRef.current)&&n.validate((function(){return a.props.onOk(t)}));case 3:case"end":return e.stop()}}),e)}))),a.store=a.props.store,a.categoryStore=new M.default,a.fileStore=new P.default,a.formRef=m.default.createRef(),a}return(0,p.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.categoryStore.fetchList({noLimit:!0})}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.isSubmitting,n=e.onCancel,r=e.detail,i=(0,o.default)(e,["visible","isSubmitting","onCancel","detail"]),s=(0,v.toJS)((0,g.default)(this.categoryStore,"list.data",[]));return m.default.createElement(E.default,(0,l.default)({},i,{className:D.default.modal,bodyClassName:D.default.body,onOk:this.handleOk,onCancel:n,visible:t,isSubmitting:a,fullScreen:!0}),m.default.createElement(b.Columns,{className:"height-full is-gapless"},m.default.createElement(b.Column,{className:"is-narrow"},m.default.createElement(w.default,{store:this.store,formData:r,categories:s,fileStore:this.fileStore,formRef:this.formRef,handleChange:this.handleAppChange})),m.default.createElement(b.Column,null,m.default.createElement(S.default,{handleChange:this.handleAppChange,store:this.store,detail:r,fileStore:this.fileStore}),m.default.createElement(C.default,{handleChange:this.handleAppChange,store:this.store,detail:r}))))}}]),t}(m.Component);t.default=O,O.propTypes={store:h.default.object,detail:h.default.object,visible:h.default.bool,onOk:h.default.func,onCancel:h.default.func},O.defaultProps={store:{},detail:{},visible:!1,onOk:function(){},onCancel:function(){}}},3337:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=r(n(97)),o=r(n(61)),i=r(n(62)),s=r(n(13)),u=r(n(14)),d=r(n(17)),c=r(n(16)),f=r(n(18)),p=r(n(0)),m=n(1),h=r(n(386)),v=r(n(225)),g=r(n(2453)),_=r(n(958)),y=r(n(267)),k=r(n(2606)),b=r(n(944)),E=r(n(224)),w=n(114),S=n(2531),C=r(n(3338)),M=function(e){function a(e){var t;return(0,s.default)(this,a),(t=(0,d.default)(this,(0,c.default)(a).call(this,e))).checkPackage=function(){var e=(0,i.default)(o.default.mark((function e(a){var n,r,l,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props.fileStore,r=n.checkFile,l=n.handleFileByBase64Str,!(i=r(a,"icon"))){e.next=6;break}t.setState({error:i,base64Str:""}),e.next=8;break;case 6:return e.next=8,l(a,(function(e){t.setState({base64Str:e,error:""}),t.handleAppChange(e,"icon"),t.props.store.uploadIcon(e)}));case 8:return e.abrupt("return",Promise.reject());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.handleAppChange=function(e,a){t.props.handleChange(e,a)},t.state={base64Str:""},t}return(0,f.default)(a,e),(0,u.default)(a,[{key:"renderIcon",value:function(){var e=this.props.formData,a=this.state,n=a.base64Str,r=a.error;return p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{className:C.default.uploadIcon},p.default.createElement("div",{className:C.default.iconShow},p.default.createElement(b.default,{className:C.default.image,isBase64Str:Boolean(n),src:n||e.icon,iconLetter:e.name,iconSize:96})),p.default.createElement("div",{className:C.default.word},p.default.createElement("div",{className:C.default.note},t("APP_ICON_FORMAT")," ",p.default.createElement("br",null),t("APP_ICON_SIZE")),p.default.createElement(k.default,{beforeUpload:this.checkPackage,accept:S.UPLOAD_FILE_TYPES.icon},p.default.createElement(E.default,null,t("Upload Icon"))))),r&&p.default.createElement("div",{className:C.default.error},t(r)))}},{key:"render",value:function(){var e=this,a=this.props,n=a.formData,r=a.formRef,l=(0,_.default)(n.category_set,{status:"enabled"})||{};return n.category_id=n.category_id||l.category_id,p.default.createElement("div",{className:C.default.wrapper},p.default.createElement("div",{className:"h5"},t("Basic Info")),p.default.createElement(y.default,{data:n,ref:r},p.default.createElement(y.default.Item,{label:t("Application Name"),desc:t("APP_NAME_DESC"),rules:[{required:!0,message:t("Please input an application name")}]},p.default.createElement(h.default,{name:"name",onChange:function(t){return e.handleAppChange(t,"name")},maxLength:20})),p.default.createElement(y.default.Item,{label:t("App Abstraction"),desc:t("APP_ABSTRACTION_DESC")},p.default.createElement(g.default,{name:"description",maxLength:120,onChange:function(t){return e.handleAppChange(t,"description")}})),p.default.createElement(y.default.Item,{label:t("Application Icon"),className:C.default.upload},this.renderIcon()),p.default.createElement(y.default.Item,{label:t("Categories"),desc:t("CHOOSE_APP_CATEGORY_DESC")},p.default.createElement(v.default,{name:"category_id",options:this.categories,onChange:this.handleAppChange})),p.default.createElement(y.default.Item,{label:t("Service provider website"),desc:t("Service provider's official website address"),rules:[{pattern:w.PATTERN_URL,message:t("Website format is error")}]},p.default.createElement(h.default,{name:"home",onChange:function(t){return e.handleAppChange(t,"home")},maxLength:100}))))}},{key:"categories",get:function(){return(0,l.default)(this.props.categories.map((function(e){var a=e.name,n=e.category_id;return{label:t("APP_CATE_".concat(a.toUpperCase()),{defaultValue:a}),value:n}})))}}]),a}(p.default.Component);a.default=M,M.propTypes={formData:m.PropTypes.object,categories:m.PropTypes.array,handleChange:m.PropTypes.func,fileStore:m.PropTypes.object},M.defaultProps={formData:{},categories:[],handleChange:function(){},fileStore:function(){}}},3338:function(e,t,a){e.exports={wrapper:"AppBaseEdit__wrapper--Rk4l1",upload:"AppBaseEdit__upload--ys_3x",uploadIcon:"AppBaseEdit__uploadIcon--xazER",iconShow:"AppBaseEdit__iconShow--2O2_i",image:"AppBaseEdit__image--dB9UI",word:"AppBaseEdit__word--3FSAi",note:"AppBaseEdit__note--3SDtD",error:"AppBaseEdit__error--BJose"}},3339:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,i,s=r(n(61)),u=r(n(62)),d=r(n(13)),c=r(n(14)),f=r(n(17)),p=r(n(16)),m=r(n(18)),h=r(n(0)),v=n(60),g=r(n(1)),_=r(n(3)),y=r(n(38)),k=r(n(22)),b=r(n(944)),E=r(n(2606)),w=n(2531),S=r(n(3340)),C=(0,v.observer)((i=o=function(e){function a(){var e,t;(0,d.default)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=(0,f.default)(this,(e=(0,p.default)(a)).call.apply(e,[this].concat(r)))).state={error:""},t.onUploadClick=function(){t.uploadRef.onClick()},t.uploadScreenshot=function(){var e=(0,u.default)(s.default.mark((function e(a,n){var r,l,o,i,d,c,f;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props.fileStore,l=r.checkFile,o=r.handleFileByBase64Str,i=t.props.store.uploadScreenshot,d=t.props.detail,(c=l(a,"screenshots"))?t.setState({error:c}):(f=n.indexOf(a),o(a,function(){var e=(0,u.default)(s.default.mark((function e(a){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState({error:""}),i(a,d,f);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),e.abrupt("return",Promise.reject());case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),t}return(0,m.default)(a,e),(0,c.default)(a,[{key:"render",value:function(){var e=this,a=this.state.error,n=this.props,r=n.detail,l=n.store.deleteScreenshot,o=(0,k.default)(r,"screenshots",""),i=o?o.split(","):[],s=i.length;return h.default.createElement("div",null,h.default.createElement("div",{className:S.default.title},t("App Screenshots")),h.default.createElement("div",{className:S.default.screenshot},h.default.createElement("ul",{className:S.default.pictures},i.map((function(e,a){return h.default.createElement("li",{key:a},h.default.createElement(b.default,{src:e,isBase64Str:!0}),h.default.createElement("div",{className:S.default.delete},h.default.createElement("label",{onClick:function(){return l(a,r)}},h.default.createElement(y.default,{name:"trash",size:20,className:S.default.icon}),t("Delete picture"))))})),s<w.SCREENSHOTS_LIMIT&&h.default.createElement("li",{className:S.default.upload},h.default.createElement(E.default,{multiple:!0,className:S.default.upload,beforeUpload:this.uploadScreenshot,ref:function(t){e.uploadRef=t},accept:w.UPLOAD_FILE_TYPES.screenshot},h.default.createElement(y.default,{name:"add",size:48,className:S.default.add})))),a?h.default.createElement("div",{className:S.default.error},t(this.state.error)):h.default.createElement("div",{className:S.default.words},s,"/",w.SCREENSHOTS_LIMIT," ",t("screenshots")," (",t("FILE_MAX_SCREENSHOTS"),")",s>0?h.default.createElement("label",{className:S.default.deleteAll,onClick:function(){return l(-1,r)}},t("Delete all")):h.default.createElement("label",{className:(0,_.default)(S.default.deleteAll,S.default.disabled)},t("Delete all")))))}}]),a}(h.default.Component),o.propTypes={detail:g.default.object,store:g.default.object,fileStore:g.default.object},o.defaultProps={detail:{},store:{},fileStore:function(){}},l=i))||l;a.default=C},3340:function(e,t,a){e.exports={title:"ScreenshotsEdit__title--2uPiY",screenshot:"ScreenshotsEdit__screenshot--2YKRw",pictures:"ScreenshotsEdit__pictures--2mut4",upload:"ScreenshotsEdit__upload--3Y5SO",add:"ScreenshotsEdit__add--svj73",delete:"ScreenshotsEdit__delete--2CvCS",icon:"ScreenshotsEdit__icon--19kdN",error:"ScreenshotsEdit__error--gtPg-",words:"ScreenshotsEdit__words--2w8iv",disabled:"ScreenshotsEdit__disabled--LwrGa",deleteAll:"ScreenshotsEdit__deleteAll--2nkH5"}},3341:function(e,a,n){"use strict";var r=n(4);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,i,s=r(n(13)),u=r(n(14)),d=r(n(17)),c=r(n(16)),f=r(n(18)),p=r(n(0)),m=n(60),h=r(n(1)),v=r(n(2496)),g=r(n(3342)),_={h1:!0,h2:!0,h3:!0,h4:!0,img:!1,link:!0,code:!0,preview:!0,expand:!0,undo:!0,redo:!0,save:!1,subfield:!0},y=(0,m.observer)((i=o=function(e){function a(e){var t;return(0,s.default)(this,a),(t=(0,d.default)(this,(0,c.default)(a).call(this,e))).handleChange=function(e){t.setState({readme:e}),t.props.handleChange(e,"abstraction")},t.state={readme:e.detail.abstraction},t}return(0,f.default)(a,e),(0,u.default)(a,[{key:"render",value:function(){var e=this.state.readme;return p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{className:g.default.header},t("App Introduction")),p.default.createElement("div",{className:g.default.readmeEdit},p.default.createElement(v.default,{value:e,onChange:this.handleChange,placeholder:"".concat(t("Start edit"),"..."),toolbar:_})))}}]),a}(p.default.Component),o.propTypes={detail:h.default.object,store:h.default.object,handleChange:h.default.func},o.defaultProps={detail:{},store:{},handleChange:function(){}},l=i))||l;a.default=y},3342:function(e,t,a){e.exports={header:"ReadmeEdit__header--ovSS-",readmeEdit:"ReadmeEdit__readmeEdit--Y_xQq"}},3343:function(e,t,a){e.exports={modal:"AppEdit__modal--BdK5Z",body:"AppEdit__body--2yuMH"}},3344:function(e,t,a){e.exports={appName:"Detail__appName--GsJ7s"}}}]);