"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _react = _interopRequireDefault(require("react"));

var _reactTestRenderer = _interopRequireDefault(require("react-test-renderer"));

var _react2 = require("@testing-library/react");

var _Alert = _interopRequireDefault(require("./Alert"));

var _Button = require("../Button");

var noop = function noop() {};

it('renders correctly', function () {
  var tree = _reactTestRenderer.default.create(_react.default.createElement(_Alert.default, {
    type: "success",
    closable: true,
    linkBtn: _react.default.createElement(_Button.Button, {
      type: "text",
      href: "https://www.qingcloud.com",
      target: "_blank"
    }, "\u524D\u5F80\u5E94\u7528\u4FE1\u606F \u2192"),
    message: "Lorem ipsum dolor sit amet, consectetur adipisicing elit.",
    description: "Lorem ipsum dolor sit amet, consectetur adipisicing elit.",
    onClose: noop,
    afterClose: noop,
    showIcon: true,
    style: {
      display: 'block'
    },
    prefixCls: "my-prefix",
    className: "my-alert"
  })).toJSON();

  expect(tree).toMatchSnapshot();
});
it('close alert', function () {
  (0, _react2.render)(_react.default.createElement(_Alert.default, {
    message: "\u6210\u529F\u4FE1\u606F\uFF01",
    type: "success",
    closable: true,
    onClose: noop
  }));
  expect(document.querySelector('button.alert-close-icon')).toBeTruthy();

  _react2.fireEvent.click(document.querySelector('button.alert-close-icon'));

  return new Promise(function (resolve) {
    setTimeout(function () {
      resolve(expect(document.querySelector('.alert')).toBeFalsy());
    }, 400);
  });
});