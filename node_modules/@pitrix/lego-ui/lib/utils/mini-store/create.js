"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread"));

var create = function create(initialState) {
  var state = initialState;
  var listeners = [];

  var setState = function setState(partial) {
    state = (0, _objectSpread2.default)({}, state, partial);

    for (var i = 0; i < listeners.length; i += 1) {
      listeners[i]();
    }
  };

  var getState = function getState() {
    return state;
  };

  var subscribe = function subscribe(listener) {
    listeners.push(listener);
    return function unsubscribe() {
      var index = listeners.indexOf(listener);
      listeners.splice(index, 1);
    };
  };

  return {
    setState: setState,
    getState: getState,
    subscribe: subscribe
  };
};

var _default = create;
exports.default = _default;